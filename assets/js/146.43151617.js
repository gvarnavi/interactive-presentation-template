"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[146],{5162:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});n(7294);var r=n(512);const a={tabItem:"tabItem_Ymn6"};var o=n(5893);function i(e){let{children:t,hidden:n,className:i}=e;return(0,o.jsx)("div",{role:"tabpanel",className:(0,r.default)(a.tabItem,i),hidden:n,children:t})}},4866:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var r=n(7294),a=n(512),o=n(2466),i=n(6550),s=n(469),l=n(1980),c=n(7392),u=n(12);function f(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function d(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??function(e){return f(e).map((e=>{let{props:{value:t,label:n,attributes:r,default:a}}=e;return{value:t,label:n,attributes:r,default:a}}))}(n);return function(e){const t=(0,c.duplicates)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function p(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function m(e){let{queryString:t=!1,groupId:n}=e;const a=(0,i.useHistory)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l.useQueryStringValue)(o),(0,r.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(a.location.search);t.set(o,e),a.replace({...a.location,search:t.toString()})}),[o,a])]}function h(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,o=d(e),[i,l]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const r=n.find((e=>e.default))??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:o}))),[c,f]=m({queryString:n,groupId:a}),[h,b]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,o]=(0,u.useStorageSlot)(n);return[a,(0,r.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:a}),v=(()=>{const e=c??h;return p({value:e,tabValues:o})?e:null})();(0,s.default)((()=>{v&&l(v)}),[v]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),f(e),b(e)}),[f,b,o]),tabValues:o}}var b=n(2389);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var _=n(5893);function w(e){let{className:t,block:n,selectedValue:r,selectValue:i,tabValues:s}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.useScrollPositionBlocker)(),u=e=>{const t=e.currentTarget,n=l.indexOf(t),a=s[n].value;a!==r&&(c(t),i(a))},f=e=>{let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const n=l.indexOf(e.currentTarget)+1;t=l[n]??l[0];break}case"ArrowLeft":{const n=l.indexOf(e.currentTarget)-1;t=l[n]??l[l.length-1];break}}t?.focus()};return(0,_.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.default)("tabs",{"tabs--block":n},t),children:s.map((e=>{let{value:t,label:n,attributes:o}=e;return(0,_.jsx)("li",{role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,ref:e=>l.push(e),onKeyDown:f,onClick:u,...o,className:(0,a.default)("tabs__item",v.tabItem,o?.className,{"tabs__item--active":r===t}),children:n??t},t)}))})}function y(e){let{lazy:t,children:n,selectedValue:a}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,_.jsx)("div",{className:"margin-top--md",children:o.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a})))})}function g(e){const t=h(e);return(0,_.jsxs)("div",{className:(0,a.default)("tabs-container",v.tabList),children:[(0,_.jsx)(w,{...e,...t}),(0,_.jsx)(y,{...e,...t})]})}function x(e){const t=(0,b.default)();return(0,_.jsx)(g,{...e,children:f(e.children)},String(t))}},1336:(e,t,n)=>{function r(e){return e`# Ptychography Helper Functions`}function a(e){return e.html`<hr class="hideable-md">`}function o(e){return e("https://cdn.jsdelivr.net/gh/nicolaspanel/numjs@0.16/dist/numjs.min.js")}function i(e){return e("https://bundle.run/ndarray-ops@1.2.2")}function s(e){return e("https://bundle.run/ndarray-complex@1.0.3")}function l(e,t){return function(n,r){let a=e.zeros(n.shape);return t.atan2(a.selection,n.selection,r.selection),a}}function c(e,t){return function(n,r){let a=e.zeros(n.shape);return t.lts(a.selection,n.selection,r),t.bandseq(a.selection,1),a}}function u(e,t,n){return class r{constructor(t){this.shape=t;let n=t.slice();n.push(2),this.data=e.zeros(n),this._nulls=new Array(t.length).fill(null)}re(){return this.data.pick(...this._nulls,0)}im(){return this.data.pick(...this._nulls,1)}abs(){return e.sqrt(this.abs_sqr())}abs_sqr(){return e.add(this.re().multiply(this.re()),this.im().multiply(this.im()))}angle(){return t(this.im(),this.re())}clone(){let e=new r(this.shape);return e.data=this.data.clone(),e}conjugate(){let t=this.re().clone(),a=this.im().clone();n.conjeq(t.selection,a.selection);let o=new r(this.shape);return o.data=e.stack([t,a],-1),o}multiply(t){let a=this.re().clone(),o=this.im().clone(),i=t.re(),s=t.im();n.muleq(a.selection,o.selection,i.selection,s.selection);let l=new r(this.shape);return l.data=e.stack([a,o],-1),l}real_multiply(t){let a=this.re().clone(),o=this.im().clone(),i=t,s=e.zeros(t.shape);n.muleq(a.selection,o.selection,i.selection,s.selection);let l=new r(this.shape);return l.data=e.stack([a,o],-1),l}scalar_multiply(t,a){let o=this.re().clone(),i=this.im().clone();n.mulseq(o.selection,i.selection,t,a);let s=new r(this.shape);return s.data=e.stack([o,i],-1),s}add(t){let a=this.re().clone(),o=this.im().clone(),i=t.re(),s=t.im();n.addeq(a.selection,o.selection,i.selection,s.selection);let l=new r(this.shape);return l.data=e.stack([a,o],-1),l}subtract(t){let a=this.re().clone(),o=this.im().clone(),i=t.re(),s=t.im();n.subeq(a.selection,o.selection,i.selection,s.selection);let l=new r(this.shape);return l.data=e.stack([a,o],-1),l}}}function f(e){return function(t,n){let r=e.zeros(t),a=1/(t*n),o=1+((t-1)/2|0);for(var i=0;i<o;i++)r.set(i,i*a);for(i=o;i<t;i++)r.set(i,(i-t)*a);return r}}function d(e){return function(t,n){let r=[t.size,n.size],a=[];a[0]=e.zeros(r),a[1]=e.zeros(r);for(let e=0;e<r[1];e++)for(let o=0;o<r[0];o++)a[0].set(o,e,t.get(o)),a[1].set(o,e,n.get(e));return a}}function p(e){return function(t){let[n,r]=t.shape,a=n/2|0,o=r/2|0,i=e.zeros([n,r]);return i.slice([null,a],[null,o]).assign(t.slice(-a,-o),!1),i.slice([null,a],o).assign(t.slice(-a,[null,o]),!1),i.slice(-a,-o).assign(t.slice([null,a],[null,o]),!1),i.slice(-a,[null,o]).assign(t.slice([null,a],-o),!1),i}}function m(e,t,n,r){return function(a,o){let[i,s]=a.shape,[l,c]=o,u=new e([i,s]);u.data=t.fft(a.data);let f=n(i,1),d=n(s,1),[p,m]=r(f,d),h=-2*Math.PI,b=t.add(p.multiply(l),m.multiply(c)).multiply(h),v=new e([i,s]),_=t.cos(b),w=t.sin(b);v.data=t.stack([_,w],-1);let y=u.multiply(v);return y.data=t.ifft(y.data),y}}function h(e){return function(t,[n,r]){let a=new e([n,r]),o=n/2|0,i=r/2|0;return a.data.slice([null,o],[null,i],null).assign(t.slice([null,o],[null,i],null),!1),a.data.slice(-o,[null,i],null).assign(t.slice(-o,[null,i],null),!1),a.data.slice([null,o],-i,null).assign(t.slice([null,o],-i,null),!1),a.data.slice(-o,-i,null).assign(t.slice(-o,-i,null),!1),a}}function b(e,t,n){return function(r,a){let[o,i]=r.shape;console.log(o);let s=new e([o,i]);s.data=t.fft(r.data);let[l,c]=[o/a|0,i/a|0],u=n(s.data,[l,c]);return u.data=t.ifft(u.data),u}}function v(){return function(e){let t=9.109383*1e-30,n=1602177e-24,r=299792458;return 662607e-39/Math.sqrt(2*t*n*e)/Math.sqrt(1+n*e/2/t/r/r)*1e11}}function _(e){return function(t){let n=9.109383*1e-30,r=1602177e-24,a=299792458,o=e(t);return 2*Math.PI/o/t*(n*a*a+r*t)/(2*n*a*a+r*t)}}function w(e,t,n,r,a,o,i){return class{constructor(t,n,r,a,o){this._gpts=t.slice(),this._sampling=n.slice(),this._energy=r,this._wavelength=e(r),this._semiangle_cutoff=a,this._defocus=o}_get_scattering_angles(){let e=t(this._gpts[0],this._sampling[0]),o=t(this._gpts[1],this._sampling[1]),[i,s]=n(e,o);return[r.sqrt(r.add(i.multiply(i.multiply(this._wavelength*this._wavelength)),s.multiply(s.multiply(this._wavelength*this._wavelength)))),a(i,s)]}_evaluate_aberrations(e,t){let n=this._defocus/this._wavelength*Math.PI,a=e.multiply(e).multiply(n),i=r.cos(a),s=r.sin(a),l=new o(a.shape);return l.data=r.stack([i,s],-1),l}_evaluate_aperture(e,t){let n=this._semiangle_cutoff/1e3,a=new o(e.shape),s=i(e,n);return a.data=r.stack([s,r.zeros(e.shape)],-1),a}build(){let[e,t]=this._get_scattering_angles(),n=this._evaluate_aberrations(e,t),a=this._evaluate_aperture(e,t),i=n.multiply(a);this._fourier_array=i;let s=new o(i.shape);s.data=r.ifft(i.data);let l=Math.sqrt(s.abs_sqr().sum());return this._array=s.scalar_multiply(1/l,0),this}}}function y(e){return e`https://observablehq.com/@mootari/notebook-data`}function g(e,t){const n=e.module();return n.variable(t()).define(["md"],r),n.variable(t()).define(["htl"],a),n.variable(t("nj")).define("nj",["require"],o),n.variable(t("ops")).define("ops",["require"],i),n.variable(t("cops")).define("cops",["require"],s),n.variable(t("atan2")).define("atan2",["nj","ops"],l),n.variable(t("lt_int_s")).define("lt_int_s",["nj","ops"],c),n.variable(t("ComplexNDArray")).define("ComplexNDArray",["nj","atan2","cops"],u),n.variable(t("fftfreq")).define("fftfreq",["nj"],f),n.variable(t("meshgrid2D")).define("meshgrid2D",["nj"],d),n.variable(t("fftshift2D")).define("fftshift2D",["nj"],p),n.variable(t("fourier_shift")).define("fourier_shift",["ComplexNDArray","nj","fftfreq","meshgrid2D"],m),n.variable(t("corner_crop")).define("corner_crop",["ComplexNDArray"],h),n.variable(t("fourier_downsample")).define("fourier_downsample",["ComplexNDArray","nj","corner_crop"],b),n.variable(t("electron_wavelength_angstroms")).define("electron_wavelength_angstroms",v),n.variable(t("electron_interaction_parameter")).define("electron_interaction_parameter",["electron_wavelength_angstroms"],_),n.variable(t("ComplexProbe")).define("ComplexProbe",["electron_wavelength_angstroms","fftfreq","meshgrid2D","nj","atan2","ComplexNDArray","lt_int_s"],w),n.variable(t()).define(["md"],y),n}function x(e){return e`# Projection Set Algorithms

Here, we will illustrate another very powerful non-convex optimization strategy used in ptychograghy, called "projection set methods".`}function E(e){return e`## Alternating Projections

Suppose we want to find the solution at the intersection of two sets:
1. a set of all points lying on the red line, and
2. a set of all point lying on the blue line.

Seems simple right? The catch is that we're only allowed to operate on one set at a time. A simple idea could be to take alternating steps where we "project" on one of the sets.

_Note:_ By "project" here we mean finding the closest point between our current location that lies on the set.

Let's try it!`}function j(e){return e.range([50,1e3],{value:200,step:25,label:"Animation speed [ms]"})}function A(e){return e.checkbox(["iterate","reset"],{value:[]})}function C(e,t){return e.plot({x:{axis:!1,domain:[-.5,9/8]},y:{axis:!1,domain:[-1/4,.5]},aspectRatio:1,style:{background:"none"},marks:[e.line([{x:-.5,y:-1/4,set:1,col:"red"},{x:9/8,y:9/16,set:1,col:"red"},{x:-.5,y:-1/16,set:2,col:"blue"},{x:9/8,y:9/64,set:2,col:"blue"}],{x:"x",y:"y",z:"set",stroke:"col"}),e.line(t,{stroke:"orange"}),e.dot(t,{fill:"orange",fillOpacity:.5,r:10})]})}function T(e){return e`## Non-Convex Sets?

The above example was rather easy, since both our sets were convex. What do you think will happen for non-convex sets? E.g. two disconnected half-lines. Well, our naive alternating projection algorithm will get stuck!`}function N(e){return e.checkbox(["iterate","reset"],{value:[]})}function q(e,t){return e.plot({x:{axis:!1,domain:[-.5,9/8]},y:{axis:!1,domain:[-1/4,.5]},aspectRatio:1,style:{background:"none"},marks:[e.line([{x:-.5,y:-1/4,set:1,col:"red"},{x:1/4,y:1/8,set:1,col:"red"},{x:.5,y:1/4,set:2,col:"red"},{x:9/8,y:9/16,set:2,col:"red"},{x:-.5,y:-1/16,set:3,col:"blue"},{x:1/4,y:1/32,set:3,col:"blue"},{x:.5,y:1/16,set:4,col:"blue"},{x:9/8,y:9/64,set:4,col:"blue"}],{x:"x",y:"y",z:"set",stroke:"col"}),e.line(t,{stroke:"orange"}),e.dot(t,{fill:"orange",fillOpacity:.5,r:10})]})}function k(e){return e`## Generalized Projections

Turns out, we don't just have to "project" to the set exactly - we can also e.g. reflect about the set to allow for a wide search-space. More generally, we can define a "family" of generalized projection set algorithms according to the iteration:`}function S(e){return e.block`
x_{k+1} \leftarrow \left(1-a-b \right)x_k + a \Pi_1 \left[x_k\right] + b \Pi_2 \left[c \Pi[x_k]+\left(1-c\right)x_k \right]
`}function $(e,t){return t`For scalar parameters ${e`(a,b,c)`}.

Some named choices include:
- Alternating Projections (AP): ${e`(a=0,b=1,c=1)`}
- Difference Map (DM): ${e`(a=-1,b=1,c=2)`}
- Relax Reflect Reflect (RRR): ${e`(a=-\gamma,b=\gamma,c=2)`}
- Relaxed Averaged Alternating Reflections (RAAR): ${e`(a=1-2\gamma,b=\gamma,c=2)`}`}function I(e){return e.form({projection_name:e.radio(["AP","DM","RRR","RAAR","Generalized"],{value:"AP",label:"projection"}),projection_gamma:e.range([0,1],{value:.875,step:.001,label:"relaxation \u03b3"})})}function R(e,t,n){return e.form({projection_a:e.range([-1,1],{value:`${"Generalized"==t.projection_name?0:n[t.projection_name].a}`,step:.001,label:"parameter a"}),projection_b:e.range([0,2],{value:`${"Generalized"==t.projection_name?1:n[t.projection_name].b}`,step:.001,label:"parameter b"}),projection_c:e.range([0,2],{value:`${"Generalized"==t.projection_name?1:n[t.projection_name].c}`,step:.001,label:"parameter c"})})}function M(e,t){return t`## Multiple Sets

In general, our algorithm above relies on only two generalized projections. When we have more than two sets, we need to reformulate our constraints in the form above. 

A simple way to do this is to apply our projections on a copy of the current iterate separately (${e`\Pi_1`} above), and then average our points together (${e`\Pi_2`} above).`}function P(e){return e.checkbox(["iterate","reset"],{value:[]})}function L(e,t,n){let r=[...Array(e.shape[0])].map(((t,n)=>({x:e.get(n,0),y:e.get(n,1),set:5,col:"green"}))),a=t.map((e=>e.reduce(((e,t)=>[e[0]+t[0],e[1]+t[1]])).map((t=>t/e.length))));return n.plot({x:{axis:!1,domain:[-.5,9/8]},y:{axis:!1,domain:[-1/4,.5]},aspectRatio:1,style:{background:"none"},marks:[n.line([{x:-.5,y:-1/4,set:1,col:"red"},{x:1/4,y:1/8,set:1,col:"red"},{x:.5,y:1/4,set:2,col:"red"},{x:9/8,y:9/16,set:2,col:"red"},{x:-.5,y:-1/16,set:3,col:"blue"},{x:1/4,y:1/32,set:3,col:"blue"},{x:.5,y:1/16,set:4,col:"blue"},{x:9/8,y:9/64,set:4,col:"blue"},...r],{x:"x",y:"y",z:"set",stroke:"col"}),n.line(a,{stroke:"orange"}),n.dot(a,{fill:"orange",fillOpacity:.5,r:10})]})}function O(e){return e.html`<hr class="hideable-md">`}function D(e){return{AP:{a:0,b:1,c:1},DM:{a:-1,b:1,c:2},RRR:{a:-e.projection_gamma,b:e.projection_gamma,c:2},RAAR:{a:1-2*e.projection_gamma,b:e.projection_gamma,c:2}}}function F(e){let t=e.arange(0,2*Math.PI,Math.PI/512),n=[-5/4*Math.cos(Math.PI/8),-5/4*Math.sin(Math.PI/8)],r=e.sin(t.multiply(4)).divide(4).add(1),a=r.multiply(e.cos(t)).subtract(n[0]).divide(3),o=r.multiply(e.sin(t)).subtract(n[1]).divide(3);return e.stack([a,o],-1)}function U(){return function([e,t]){return[.4*(2*e+t),(2*e+t)/5]}}function B(){return function([e,t]){return[32/65*(2*e+t/4),4/65*(2*e+t/4)]}}function z(){return function([e,t]){if(8*e+4*t>=5||2*e+t<=5/8){let n=(2*e+t)/5;return[2*n,n]}if(15/16<2*e+t&&2*e+t<5/4)return[.5,1/4];if(2*e+t>5/8)return[1/4,1/8];{let n=2*t/5+4*e/5-1/8;return[2*n,n]}}}function V(){return function([e,t]){if(8*e+t>=65/16||8*e+t<=65/32){let n=(8*e+t)/65;return[8*n,n]}if(195/64<8*e+t&&e+t<65/16)return[.5,1/16];if(8*e+t>=65/32)return[1/4,1/32];{let n=2*t/65+16*e/64-1/32;return[8*n,n]}}}function W(e,t){return function([n,r]){let a=e.add(t.pick(null,0).subtract(n).pow(2),t.pick(null,1).subtract(r).pow(2)).tolist().reduce(((e,t,n,r)=>t>r[e]?e:n),-1);return[t.get(a,0),t.get(a,1)]}}function H(){return function(e,t,[n,r,a]){let o=1-n-r,i=1-a;return function([s,l]){let[c,u]=e([s,l]),[f,d]=t([a*c+i*s,a*u+i*l]);return[o*s+n*c+r*f,o*l+n*u+r*d]}}}function G(){return function(e,t,n){return function([[r,a],[o,i],[s,l]]){return[e([r,a]),t([o,i]),n([s,l])]}}}function Y(){return function([[e,t],[n,r],[a,o]]){let i=(e+n+a)/3,s=(t+r+o)/3;return[[i,s],[i,s],[i,s]]}}function Q(e,t){return function(n,r,a,[o,i,s]){let l=1-o-i,c=1-s,u=e(n,r,a),f=t;return function([[e,t],[n,r],[a,d]]){let[[p,m],[h,b],[v,_]]=u([[e,t],[n,r],[a,d]]),[[w,y],[g,x],[E,j]]=f([[s*p+c*e,s*m+c*t],[s*h+c*n,s*b+c*r],[s*v+c*a,s*_+c*d]]);return[[l*e+o*p+i*w,l*t+o*m+i*y],[l*n+o*h+i*g,l*r+o*b+i*x],[l*a+o*v+i*E,l*d+o*_+i*j]]}}}function Z(e,t,n,r){return e(t,n,[r.projection_a,r.projection_b,r.projection_c])}function J(e,t,n,r){return e(t,n,[r.projection_a,r.projection_b,r.projection_c])}function K(e,t,n,r,a){return e(t,n,r,[a.projection_a,a.projection_b,a.projection_c])}function X(){return[[1,.3]]}function ee(){return[[1,.3]]}function te(){return[[[1,.3],[1,.3],[1,.3]]]}function ne(e,t){e.includes("reset")&&(t.value=[[1,.3]])}function*re(e,t,n,r,a,o){let i=0;for(;e.includes("iterate");){yield t.tick(n,++i);let e=r.length;a.value=[...r,o(r[e-1])]}}function ae(e,t){e.includes("reset")&&(t.value=[[1,.3]])}function*oe(e,t,n,r,a,o){let i=0;for(;e.includes("iterate");){yield t.tick(n,++i);let e=r.length;a.value=[...r,o(r[e-1])]}}function ie(e,t){e.includes("reset")&&(t.value=[[[1,.3],[1,.3],[1,.3]]])}function*se(e,t,n,r,a,o){let i=0;for(;e.includes("iterate");){yield t.tick(n,++i);let e=r.length;a.value=[...r,o(r[e-1])]}}function le(e,t){const n=e.module();n.variable(t()).define(["md"],x),n.variable(t()).define(["md"],E),n.variable(t("viewof animation_speed")).define("viewof animation_speed",["Inputs"],j),n.variable(t("animation_speed")).define("animation_speed",["Generators","viewof animation_speed"],((e,t)=>e.input(t))),n.variable(t("viewof iterate_convex")).define("viewof iterate_convex",["Inputs"],A),n.variable(t("iterate_convex")).define("iterate_convex",["Generators","viewof iterate_convex"],((e,t)=>e.input(t))),n.variable(t("two_convex_sets_plot")).define("two_convex_sets_plot",["Plot","iteration_pts_convex"],C),n.variable(t()).define(["md"],T),n.variable(t("viewof iterate_nonconvex")).define("viewof iterate_nonconvex",["Inputs"],N),n.variable(t("iterate_nonconvex")).define("iterate_nonconvex",["Generators","viewof iterate_nonconvex"],((e,t)=>e.input(t))),n.variable(t("two_nonconvex_sets_plot")).define("two_nonconvex_sets_plot",["Plot","iteration_pts_nonconvex"],q),n.variable(t()).define(["md"],k),n.variable(t()).define(["tex"],S),n.variable(t()).define(["tex","md"],$),n.variable(t("viewof projection_inputs_a")).define("viewof projection_inputs_a",["Inputs"],I),n.variable(t("projection_inputs_a")).define("projection_inputs_a",["Generators","viewof projection_inputs_a"],((e,t)=>e.input(t))),n.variable(t("viewof projection_inputs_b")).define("viewof projection_inputs_b",["Inputs","projection_inputs_a","named_projection_parameters"],R),n.variable(t("projection_inputs_b")).define("projection_inputs_b",["Generators","viewof projection_inputs_b"],((e,t)=>e.input(t))),n.variable(t()).define(["tex","md"],M),n.variable(t("viewof iterate_flower")).define("viewof iterate_flower",["Inputs"],P),n.variable(t("iterate_flower")).define("iterate_flower",["Generators","viewof iterate_flower"],((e,t)=>e.input(t))),n.variable(t("flower_sets_plot")).define("flower_sets_plot",["flower_values","iteration_pts_flower","Plot"],L),n.variable(t()).define(["htl"],O);const r=e.module(g);return n.import("nj",r),n.variable(t("named_projection_parameters")).define("named_projection_parameters",["projection_inputs_a"],D),n.variable(t("flower_values")).define("flower_values",["nj"],F),n.variable(t("region_nearest_convex_red")).define("region_nearest_convex_red",U),n.variable(t("region_nearest_convex_blue")).define("region_nearest_convex_blue",B),n.variable(t("region_nearest_nonconvex_red")).define("region_nearest_nonconvex_red",z),n.variable(t("region_nearest_nonconvex_blue")).define("region_nearest_nonconvex_blue",V),n.variable(t("region_nearest_flower_green")).define("region_nearest_flower_green",["nj","flower_values"],W),n.variable(t("generalized_projection")).define("generalized_projection",H),n.variable(t("product_space_projection")).define("product_space_projection",G),n.variable(t("diagonal_projection")).define("diagonal_projection",Y),n.variable(t("generalized_projection_multiple")).define("generalized_projection_multiple",["product_space_projection","diagonal_projection"],Q),n.variable(t("two_convex_sets")).define("two_convex_sets",["generalized_projection","region_nearest_convex_red","region_nearest_convex_blue","projection_inputs_b"],Z),n.variable(t("two_nonconvex_sets")).define("two_nonconvex_sets",["generalized_projection","region_nearest_nonconvex_red","region_nearest_nonconvex_blue","projection_inputs_b"],J),n.variable(t("three_nonconvex_sets")).define("three_nonconvex_sets",["generalized_projection_multiple","region_nearest_nonconvex_red","region_nearest_nonconvex_blue","region_nearest_flower_green","projection_inputs_b"],K),n.define("initial iteration_pts_convex",X),n.variable(t("mutable iteration_pts_convex")).define("mutable iteration_pts_convex",["Mutable","initial iteration_pts_convex"],((e,t)=>new e(t))),n.variable(t("iteration_pts_convex")).define("iteration_pts_convex",["mutable iteration_pts_convex"],(e=>e.generator)),n.define("initial iteration_pts_nonconvex",ee),n.variable(t("mutable iteration_pts_nonconvex")).define("mutable iteration_pts_nonconvex",["Mutable","initial iteration_pts_nonconvex"],((e,t)=>new e(t))),n.variable(t("iteration_pts_nonconvex")).define("iteration_pts_nonconvex",["mutable iteration_pts_nonconvex"],(e=>e.generator)),n.define("initial iteration_pts_flower",te),n.variable(t("mutable iteration_pts_flower")).define("mutable iteration_pts_flower",["Mutable","initial iteration_pts_flower"],((e,t)=>new e(t))),n.variable(t("iteration_pts_flower")).define("iteration_pts_flower",["mutable iteration_pts_flower"],(e=>e.generator)),n.variable(t("two_convex_sets_reset")).define("two_convex_sets_reset",["iterate_convex","mutable iteration_pts_convex"],ne),n.variable(t("two_convex_sets_generator")).define("two_convex_sets_generator",["iterate_convex","Promises","animation_speed","iteration_pts_convex","mutable iteration_pts_convex","two_convex_sets"],re),n.variable(t("two_nonconvex_sets_reset")).define("two_nonconvex_sets_reset",["iterate_nonconvex","mutable iteration_pts_nonconvex"],ae),n.variable(t("two_nonconvex_sets_generator")).define("two_nonconvex_sets_generator",["iterate_nonconvex","Promises","animation_speed","iteration_pts_nonconvex","mutable iteration_pts_nonconvex","two_nonconvex_sets"],oe),n.variable(t("flower_sets_reset")).define("flower_sets_reset",["iterate_flower","mutable iteration_pts_flower"],ie),n.variable(t("flower_sets_generator")).define("flower_sets_generator",["iterate_flower","Promises","animation_speed","iteration_pts_flower","mutable iteration_pts_flower","three_nonconvex_sets"],se),n}function ce(e){return e}function ue(e){return e}function fe(e){return e}function de(e){return e}function pe(e){return e.html`<hr class="hideable-md" >`}function me(e){return e}function he(e){return e}function be(e,t){const n=e.module();n.variable(t()).define(["viewof iterate_nonconvex"],ce),n.variable(t()).define(["two_nonconvex_sets_plot"],ue),n.variable(t()).define(["viewof projection_inputs_a"],fe),n.variable(t()).define(["viewof projection_inputs_b"],de),n.variable(t()).define(["htl"],pe);const r=e.module(le);return n.import("viewof iterate_nonconvex",r),n.import("iterate_nonconvex",r),n.import("two_nonconvex_sets_plot",r),n.import("two_nonconvex_sets_generator",r),n.import("two_nonconvex_sets_reset",r),n.import("viewof projection_inputs_a",r),n.import("projection_inputs_a",r),n.import("viewof projection_inputs_b",r),n.import("projection_inputs_b",r),n.variable(t()).define(["two_nonconvex_sets_generator"],me),n.variable(t()).define(["two_nonconvex_sets_reset"],he),n}n.r(t),n.d(t,{default:()=>be})},7940:(e,t,n)=>{function r(e,t,n){n=n||{};var r=e.ownerDocument,a=r.defaultView.CustomEvent;"function"==typeof a?a=new a(t,{detail:n}):((a=r.createEvent("Event")).initEvent(t,!1,!1),a.detail=n),e.dispatchEvent(a)}function a(e){return Array.isArray(e)||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function o(e){return e===(0|e)+""}function i(e){const t=document.createElement("span");return t.className="observablehq--cellname",t.textContent=`${e} = `,t}n.r(t),n.d(t,{Inspector:()=>de,Library:()=>pe.Library,Runtime:()=>Oe,RuntimeError:()=>me});const s=Symbol.prototype.toString;function l(e){return s.call(e)}const{getOwnPropertySymbols:c,prototype:{hasOwnProperty:u}}=Object,{toStringTag:f}=Symbol,d={},p=c;function m(e,t){return u.call(e,t)}function h(e){return e[f]||e.constructor&&e.constructor.name||"Object"}function b(e,t){try{const n=e[t];return n&&n.constructor,n}catch(n){return d}}const v=[{symbol:"@@__IMMUTABLE_INDEXED__@@",name:"Indexed",modifier:!0},{symbol:"@@__IMMUTABLE_KEYED__@@",name:"Keyed",modifier:!0},{symbol:"@@__IMMUTABLE_LIST__@@",name:"List",arrayish:!0},{symbol:"@@__IMMUTABLE_MAP__@@",name:"Map"},{symbol:"@@__IMMUTABLE_ORDERED__@@",name:"Ordered",modifier:!0,prefix:!0},{symbol:"@@__IMMUTABLE_RECORD__@@",name:"Record"},{symbol:"@@__IMMUTABLE_SET__@@",name:"Set",arrayish:!0,setish:!0},{symbol:"@@__IMMUTABLE_STACK__@@",name:"Stack",arrayish:!0}];function _(e){try{let t=v.filter((({symbol:t})=>!0===e[t]));if(!t.length)return;const n=t.find((e=>!e.modifier)),r="Map"===n.name&&t.find((e=>e.modifier&&e.prefix)),a=t.some((e=>e.arrayish)),o=t.some((e=>e.setish));return{name:`${r?r.name:""}${n.name}`,symbols:t,arrayish:a&&!o,setish:o}}catch(t){return null}}const{getPrototypeOf:w,getOwnPropertyDescriptors:y}=Object,g=w({});function x(e,t,n,o){let s,l,c,u,f=a(e);e instanceof Map?e instanceof e.constructor?(s=`Map(${e.size})`,l=E):(s="Map()",l=q):e instanceof Set?e instanceof e.constructor?(s=`Set(${e.size})`,l=j):(s="Set()",l=q):f?(s=`${e.constructor.name}(${e.length})`,l=C):(u=_(e))?(s=`Immutable.${u.name}${"Record"===u.name?"":`(${e.size})`}`,f=u.arrayish,l=u.arrayish?T:u.setish?A:k):o?(s=h(e),l=N):(s=h(e),l=q);const d=document.createElement("span");d.className="observablehq--expanded",n&&d.appendChild(i(n));const p=d.appendChild(document.createElement("a"));p.innerHTML="<svg width=8 height=8 class='observablehq--caret'>\n    <path d='M4 7L0 1h8z' fill='currentColor' />\n  </svg>",p.appendChild(document.createTextNode(`${s}${f?" [":" {"}`)),p.addEventListener("mouseup",(function(t){t.stopPropagation(),ue(d,P(e,null,n,o))})),l=l(e);for(let r=0;!(c=l.next()).done&&r<20;++r)d.appendChild(c.value);if(!c.done){const e=d.appendChild(document.createElement("a"));e.className="observablehq--field",e.style.display="block",e.appendChild(document.createTextNode("  \u2026 more")),e.addEventListener("mouseup",(function(e){e.stopPropagation(),d.insertBefore(c.value,d.lastChild.previousSibling);for(let t=0;!(c=l.next()).done&&t<19;++t)d.insertBefore(c.value,d.lastChild.previousSibling);c.done&&d.removeChild(d.lastChild.previousSibling),r(d,"load")}))}return d.appendChild(document.createTextNode(f?"]":"}")),d}function*E(e){for(const[t,n]of e)yield I(t,n);yield*q(e)}function*j(e){for(const t of e)yield R(t);yield*q(e)}function*A(e){for(const t of e)yield R(t)}function*C(e){for(let t=0,n=e.length;t<n;++t)t in e&&(yield $(t,b(e,t),"observablehq--index"));for(const t in e)!o(t)&&m(e,t)&&(yield $(t,b(e,t),"observablehq--key"));for(const t of p(e))yield $(l(t),b(e,t),"observablehq--symbol")}function*T(e){let t=0;for(const n=e.size;t<n;++t)yield $(t,e.get(t),!0)}function*N(e){for(const n in y(e))yield $(n,b(e,n),"observablehq--key");for(const n of p(e))yield $(l(n),b(e,n),"observablehq--symbol");const t=w(e);t&&t!==g&&(yield S(t))}function*q(e){for(const n in e)m(e,n)&&(yield $(n,b(e,n),"observablehq--key"));for(const n of p(e))yield $(l(n),b(e,n),"observablehq--symbol");const t=w(e);t&&t!==g&&(yield S(t))}function*k(e){for(const[t,n]of e)yield $(t,n,"observablehq--key")}function S(e){const t=document.createElement("div"),n=t.appendChild(document.createElement("span"));return t.className="observablehq--field",n.className="observablehq--prototype-key",n.textContent="  <prototype>",t.appendChild(document.createTextNode(": ")),t.appendChild(ce(e,void 0,void 0,void 0,!0)),t}function $(e,t,n){const r=document.createElement("div"),a=r.appendChild(document.createElement("span"));return r.className="observablehq--field",a.className=n,a.textContent=`  ${e}`,r.appendChild(document.createTextNode(": ")),r.appendChild(ce(t)),r}function I(e,t){const n=document.createElement("div");return n.className="observablehq--field",n.appendChild(document.createTextNode("  ")),n.appendChild(ce(e)),n.appendChild(document.createTextNode(" => ")),n.appendChild(ce(t)),n}function R(e){const t=document.createElement("div");return t.className="observablehq--field",t.appendChild(document.createTextNode("  ")),t.appendChild(ce(e)),t}function M(e){const t=window.getSelection();return"Range"===t.type&&(t.containsNode(e,!0)||t.anchorNode.isSelfOrDescendant(e)||t.focusNode.isSelfOrDescendant(e))}function P(e,t,n,r){let o,s,l,c,u=a(e);if(e instanceof Map?e instanceof e.constructor?(o=`Map(${e.size})`,s=L):(o="Map()",s=B):e instanceof Set?e instanceof e.constructor?(o=`Set(${e.size})`,s=O):(o="Set()",s=B):u?(o=`${e.constructor.name}(${e.length})`,s=U):(c=_(e))?(o=`Immutable.${c.name}${"Record"===c.name?"":`(${e.size})`}`,u=c.arrayish,s=c.arrayish?F:c.setish?D:z):(o=h(e),s=B),t){const t=document.createElement("span");return t.className="observablehq--shallow",n&&t.appendChild(i(n)),t.appendChild(document.createTextNode(o)),t.addEventListener("mouseup",(function(n){M(t)||(n.stopPropagation(),ue(t,P(e)))})),t}const f=document.createElement("span");f.className="observablehq--collapsed",n&&f.appendChild(i(n));const d=f.appendChild(document.createElement("a"));d.innerHTML="<svg width=8 height=8 class='observablehq--caret'>\n    <path d='M7 4L1 8V0z' fill='currentColor' />\n  </svg>",d.appendChild(document.createTextNode(`${o}${u?" [":" {"}`)),f.addEventListener("mouseup",(function(t){M(f)||(t.stopPropagation(),ue(f,x(e,0,n,r)))}),!0),s=s(e);for(let a=0;!(l=s.next()).done&&a<20;++a)a>0&&f.appendChild(document.createTextNode(", ")),f.appendChild(l.value);return l.done||f.appendChild(document.createTextNode(", \u2026")),f.appendChild(document.createTextNode(u?"]":"}")),f}function*L(e){for(const[t,n]of e)yield H(t,n);yield*B(e)}function*O(e){for(const t of e)yield ce(t,!0);yield*B(e)}function*D(e){for(const t of e)yield ce(t,!0)}function*F(e){let t=-1,n=0;for(const r=e.size;n<r;++n)n>t+1&&(yield V(n-t-1)),yield ce(e.get(n),!0),t=n;n>t+1&&(yield V(n-t-1))}function*U(e){let t=-1,n=0;for(const r=e.length;n<r;++n)n in e&&(n>t+1&&(yield V(n-t-1)),yield ce(b(e,n),!0),t=n);n>t+1&&(yield V(n-t-1));for(const r in e)!o(r)&&m(e,r)&&(yield W(r,b(e,r),"observablehq--key"));for(const r of p(e))yield W(l(r),b(e,r),"observablehq--symbol")}function*B(e){for(const t in e)m(e,t)&&(yield W(t,b(e,t),"observablehq--key"));for(const t of p(e))yield W(l(t),b(e,t),"observablehq--symbol")}function*z(e){for(const[t,n]of e)yield W(t,n,"observablehq--key")}function V(e){const t=document.createElement("span");return t.className="observablehq--empty",t.textContent=1===e?"empty":`empty \xd7 ${e}`,t}function W(e,t,n){const r=document.createDocumentFragment(),a=r.appendChild(document.createElement("span"));return a.className=n,a.textContent=e,r.appendChild(document.createTextNode(": ")),r.appendChild(ce(t,!0)),r}function H(e,t){const n=document.createDocumentFragment();return n.appendChild(ce(e,!0)),n.appendChild(document.createTextNode(" => ")),n.appendChild(ce(t,!0)),n}function G(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return"function"==typeof t?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),a=e.getUTCSeconds(),o=e.getUTCMilliseconds();return`${i=e.getUTCFullYear(),i<0?`-${Y(-i,6)}`:i>9999?`+${Y(i,6)}`:Y(i,4)}-${Y(e.getUTCMonth()+1,2)}-${Y(e.getUTCDate(),2)}${n||r||a||o?`T${Y(n,2)}:${Y(r,2)}${a||o?`:${Y(a,2)}${o?`.${Y(o,3)}`:""}`:""}Z`:""}`;var i}function Y(e,t){return`${e}`.padStart(t,"0")}var Q=Error.prototype.toString;var Z=RegExp.prototype.toString;const J=20;function K(e){return e.replace(/[\\`\x00-\x09\x0b-\x19]|\${/g,X)}function X(e){var t=e.charCodeAt(0);switch(t){case 8:return"\\b";case 9:return"\\t";case 11:return"\\v";case 12:return"\\f";case 13:return"\\r"}return t<16?"\\x0"+t.toString(16):t<32?"\\x"+t.toString(16):"\\"+e}function ee(e,t){for(var n=0;t.exec(e);)++n;return n}var te=Function.prototype.toString,ne={prefix:"async \u0192"},re={prefix:"async \u0192*"},ae={prefix:"class"},oe={prefix:"\u0192"},ie={prefix:"\u0192*"};function se(e,t,n){var r=document.createElement("span");r.className="observablehq--function",n&&r.appendChild(i(n));var a=r.appendChild(document.createElement("span"));return a.className="observablehq--keyword",a.textContent=e.prefix,r.appendChild(document.createTextNode(t)),r}const{prototype:{toString:le}}=Object;function ce(e,t,n,r,a){let o=typeof e;switch(o){case"boolean":case"undefined":e+="";break;case"number":e=0===e&&1/e<0?"-0":e+"";break;case"bigint":e+="n";break;case"symbol":e=l(e);break;case"function":return function(e,t){var n,r,a=te.call(e);switch(e.constructor&&e.constructor.name){case"AsyncFunction":n=ne;break;case"AsyncGeneratorFunction":n=re;break;case"GeneratorFunction":n=ie;break;default:n=/^class\b/.test(a)?ae:oe}return n===ae?se(n,"",t):(r=/^(?:async\s*)?(\w+)\s*=>/.exec(a))?se(n,"("+r[1]+")",t):(r=/^(?:async\s*)?\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(a))||(r=/^(?:async\s*)?function(?:\s*\*)?(?:\s*\w+)?\s*\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(a))?se(n,r[1]?"("+r[1].replace(/\s*,\s*/g,", ")+")":"()",t):se(n,"(\u2026)",t)}(e,r);case"string":return function(e,t,n,r){if(!1===t){if(ee(e,/["\n]/g)<=ee(e,/`|\${/g)){const t=document.createElement("span");r&&t.appendChild(i(r));const n=t.appendChild(document.createElement("span"));return n.className="observablehq--string",n.textContent=JSON.stringify(e),t}const a=e.split("\n");if(a.length>J&&!n){const n=document.createElement("div");r&&n.appendChild(i(r));const o=n.appendChild(document.createElement("span"));o.className="observablehq--string",o.textContent="`"+K(a.slice(0,J).join("\n"));const s=n.appendChild(document.createElement("span")),l=a.length-J;return s.textContent=`Show ${l} truncated line${l>1?"s":""}`,s.className="observablehq--string-expand",s.addEventListener("mouseup",(function(a){a.stopPropagation(),ue(n,ce(e,t,!0,r))})),n}const o=document.createElement("span");r&&o.appendChild(i(r));const s=o.appendChild(document.createElement("span"));return s.className="observablehq--string"+(n?" observablehq--expanded":""),s.textContent="`"+K(e)+"`",o}const a=document.createElement("span");r&&a.appendChild(i(r));const o=a.appendChild(document.createElement("span"));return o.className="observablehq--string",o.textContent=JSON.stringify(e.length>100?`${e.slice(0,50)}\u2026${e.slice(-49)}`:e),a}(e,t,n,r);default:if(null===e){o=null,e="null";break}if(e instanceof Date){o="date",e=G(e,"Invalid Date");break}if(e===d){o="forbidden",e="[forbidden]";break}switch(le.call(e)){case"[object RegExp]":o="regexp",e=function(e){return Z.call(e)}(e);break;case"[object Error]":case"[object DOMException]":o="error",e=function(e){return e.stack||Q.call(e)}(e);break;default:return(n?x:P)(e,t,r,a)}}const s=document.createElement("span");r&&s.appendChild(i(r));const c=s.appendChild(document.createElement("span"));return c.className=`observablehq--${o}`,c.textContent=e,s}function ue(e,t){e.classList.contains("observablehq--inspect")&&t.classList.add("observablehq--inspect"),e.parentNode.replaceChild(t,e),r(t,"load")}const fe=/\s+\(\d+:\d+\)$/m;class de{constructor(e){if(!e)throw new Error("invalid node");this._node=e,e.classList.add("observablehq")}pending(){const{_node:e}=this;e.classList.remove("observablehq--error"),e.classList.add("observablehq--running")}fulfilled(e,t){const{_node:n}=this;if((!function(e){return(e instanceof Element||e instanceof Text)&&e instanceof e.constructor}(e)||e.parentNode&&e.parentNode!==n)&&(e=ce(e,!1,n.firstChild&&n.firstChild.classList&&n.firstChild.classList.contains("observablehq--expanded"),t)).classList.add("observablehq--inspect"),n.classList.remove("observablehq--running","observablehq--error"),n.firstChild!==e)if(n.firstChild){for(;n.lastChild!==n.firstChild;)n.removeChild(n.lastChild);n.replaceChild(e,n.firstChild)}else n.appendChild(e);r(n,"update")}rejected(e,t){const{_node:n}=this;for(n.classList.remove("observablehq--running"),n.classList.add("observablehq--error");n.lastChild;)n.removeChild(n.lastChild);var a=document.createElement("div");a.className="observablehq--inspect",t&&a.appendChild(i(t)),a.appendChild(document.createTextNode((e+"").replace(fe,""))),n.appendChild(a),r(n,"error",{error:e})}}de.into=function(e){if("string"==typeof e&&null==(e=document.querySelector(e)))throw new Error("container not found");return function(){return new de(e.appendChild(document.createElement("div")))}};var pe=n(7138);class me extends Error{constructor(e,t){super(e),this.input=t}}function he(e){return()=>e}function be(e){return e}me.prototype.name="RuntimeError";const ve=Array.prototype,_e=ve.map;ve.forEach;function we(){}const ye=2,ge=3,xe=Symbol("no-observer");function Ee(e,t,n,r){var a;n||(n=xe),Object.defineProperties(this,{_observer:{value:n,writable:!0},_definition:{value:Te,writable:!0},_duplicate:{value:void 0,writable:!0},_duplicates:{value:void 0,writable:!0},_indegree:{value:NaN,writable:!0},_inputs:{value:[],writable:!0},_invalidate:{value:we,writable:!0},_module:{value:t},_name:{value:null,writable:!0},_outputs:{value:new Set,writable:!0},_promise:{value:Promise.resolve(void 0),writable:!0},_reachable:{value:n!==xe,writable:!0},_rejector:{value:(a=this,e=>{if(e===Ne)throw e;if(e===Te)throw new me(`${a._name} is not defined`,a._name);if(e instanceof Error&&e.message)throw new me(e.message,a._name);throw new me(`${a._name} could not be resolved`,a._name)})},_shadow:{value:je(t,r)},_type:{value:e},_value:{value:void 0,writable:!0},_version:{value:0,writable:!0}})}function je(e,t){return t?.shadow?new Map(Object.entries(t.shadow).map((([t,n])=>[t,new Ee(ye,e).define([],n)]))):null}function Ae(e){e._module._runtime._dirty.add(e),e._outputs.add(this)}function Ce(e){e._module._runtime._dirty.add(e),e._outputs.delete(this)}function Te(){throw Te}function Ne(){throw Ne}function qe(e){return()=>{throw new me(`${e} is defined more than once`)}}function ke(e,t,n){const r=this._module._scope,a=this._module._runtime;if(this._inputs.forEach(Ce,this),t.forEach(Ae,this),this._inputs=t,this._definition=n,this._value=void 0,n===we?a._variables.delete(this):a._variables.add(this),e!==this._name||r.get(e)!==this){let t,o;if(this._name)if(this._outputs.size)r.delete(this._name),o=this._module._resolve(this._name),o._outputs=this._outputs,this._outputs=new Set,o._outputs.forEach((function(e){e._inputs[e._inputs.indexOf(this)]=o}),this),o._outputs.forEach(a._updates.add,a._updates),a._dirty.add(o).add(this),r.set(this._name,o);else if((o=r.get(this._name))===this)r.delete(this._name);else{if(o._type!==ge)throw new Error;o._duplicates.delete(this),this._duplicate=void 0,1===o._duplicates.size&&(o=o._duplicates.keys().next().value,t=r.get(this._name),o._outputs=t._outputs,t._outputs=new Set,o._outputs.forEach((function(e){e._inputs[e._inputs.indexOf(t)]=o})),o._definition=o._duplicate,o._duplicate=void 0,a._dirty.add(t).add(o),a._updates.add(o),r.set(this._name,o))}if(this._outputs.size)throw new Error;e&&((o=r.get(e))?o._type===ge?(this._definition=qe(e),this._duplicate=n,o._duplicates.add(this)):o._type===ye?(this._outputs=o._outputs,o._outputs=new Set,this._outputs.forEach((function(e){e._inputs[e._inputs.indexOf(o)]=this}),this),a._dirty.add(o).add(this),r.set(e,this)):(o._duplicate=o._definition,this._duplicate=n,t=new Ee(ge,this._module),t._name=e,t._definition=this._definition=o._definition=qe(e),t._outputs=o._outputs,o._outputs=new Set,t._outputs.forEach((function(e){e._inputs[e._inputs.indexOf(o)]=t})),t._duplicates=new Set([this,o]),a._dirty.add(o).add(t),a._updates.add(o).add(t),r.set(e,t)):r.set(e,this)),this._name=e}return this._version>0&&++this._version,a._updates.add(this),a._compute(),this}Object.defineProperties(Ee.prototype,{_pending:{value:function(){this._observer.pending&&this._observer.pending()},writable:!0,configurable:!0},_fulfilled:{value:function(e){this._observer.fulfilled&&this._observer.fulfilled(e,this._name)},writable:!0,configurable:!0},_rejected:{value:function(e){this._observer.rejected&&this._observer.rejected(e,this._name)},writable:!0,configurable:!0},_resolve:{value:function(e){return this._shadow?.get(e)??this._module._resolve(e)},writable:!0,configurable:!0},define:{value:function(e,t,n){switch(arguments.length){case 1:n=e,e=t=null;break;case 2:n=t,"string"==typeof e?t=null:(t=e,e=null)}return ke.call(this,null==e?null:String(e),null==t?[]:_e.call(t,this._resolve,this),"function"==typeof n?n:he(n))},writable:!0,configurable:!0},delete:{value:function(){return ke.call(this,null,[],we)},writable:!0,configurable:!0},import:{value:function(e,t,n){arguments.length<3&&(n=t,t=e);return ke.call(this,String(t),[n._resolve(String(e))],be)},writable:!0,configurable:!0}});const Se=Symbol("variable"),$e=Symbol("invalidation"),Ie=Symbol("visibility");function Re(e,t=[]){Object.defineProperties(this,{_runtime:{value:e},_scope:{value:new Map},_builtins:{value:new Map([["@variable",Se],["invalidation",$e],["visibility",Ie],...t])},_source:{value:null,writable:!0}})}async function Me(e,t){await e._compute();try{return await t._promise}catch(n){if(n===Ne)return Me(e,t);throw n}}function Pe(e){return e._name}Object.defineProperties(Re.prototype,{_resolve:{value:function(e){let t,n=this._scope.get(e);if(!n)if(n=new Ee(ye,this),this._builtins.has(e))n.define(e,he(this._builtins.get(e)));else if(this._runtime._builtin._scope.has(e))n.import(e,this._runtime._builtin);else{try{t=this._runtime._global(e)}catch(r){return n.define(e,function(e){return()=>{throw e}}(r))}void 0===t?this._scope.set(n._name=e,n):n.define(e,he(t))}return n},writable:!0,configurable:!0},redefine:{value:function(e){const t=this._scope.get(e);if(!t)throw new me(`${e} is not defined`);if(t._type===ge)throw new me(`${e} is defined more than once`);return t.define.apply(t,arguments)},writable:!0,configurable:!0},define:{value:function(){const e=new Ee(1,this);return e.define.apply(e,arguments)},writable:!0,configurable:!0},derive:{value:function(e,t){const n=new Map,r=new Set,a=[];function o(e){let t=n.get(e);return t||(t=new Re(e._runtime,e._builtins),t._source=e,n.set(e,t),a.push([t,e]),r.add(e),t)}const i=o(this);for(const s of e){const{alias:e,name:n}="object"==typeof s?s:{name:s};i.import(n,null==e?n:e,t)}for(const s of r)for(const[e,t]of s._scope)if(t._definition===be){if(s===this&&i._scope.has(e))continue;const n=t._inputs[0]._module;n._source&&o(n)}for(const[s,l]of a)for(const[e,t]of l._scope){const r=s._scope.get(e);if(!r||r._type===ye)if(t._definition===be){const r=t._inputs[0],a=r._module;s.import(r._name,e,n.get(a)||a)}else s.define(e,t._inputs.map(Pe),t._definition)}return i},writable:!0,configurable:!0},import:{value:function(){const e=new Ee(1,this);return e.import.apply(e,arguments)},writable:!0,configurable:!0},value:{value:async function(e){let t=this._scope.get(e);if(!t)throw new me(`${e} is not defined`);if(t._observer!==xe)return Me(this._runtime,t);t=this.variable(!0).define([e],be);try{return await Me(this._runtime,t)}finally{t.delete()}},writable:!0,configurable:!0},variable:{value:function(e,t){return new Ee(1,this,e,t)},writable:!0,configurable:!0},builtin:{value:function(e,t){this._builtins.set(e,t)},writable:!0,configurable:!0}});const Le="function"==typeof requestAnimationFrame?requestAnimationFrame:"function"==typeof setImmediate?setImmediate:e=>setTimeout(e,0);function Oe(e=new pe.Library,t=Ge){const n=this.module();if(Object.defineProperties(this,{_dirty:{value:new Set},_updates:{value:new Set},_precomputes:{value:[],writable:!0},_computing:{value:null,writable:!0},_init:{value:null,writable:!0},_modules:{value:new Map},_variables:{value:new Set},_disposed:{value:!1,writable:!0},_builtin:{value:n},_global:{value:t}}),e)for(const r in e)new Ee(ye,n).define(r,[],e[r])}function De(e){const t=new Set(e._inputs);for(const n of t){if(n===e)return!0;n._inputs.forEach(t.add,t)}return!1}function Fe(e){++e._indegree}function Ue(e){--e._indegree}function Be(e){return e._promise.catch(e._rejector)}function ze(e){return new Promise((function(t){e._invalidate=t}))}function Ve(e,t){let n,r,a="function"==typeof IntersectionObserver&&t._observer&&t._observer._node,o=!a,i=we,s=we;return a&&(r=new IntersectionObserver((([e])=>(o=e.isIntersecting)&&(n=null,i()))),r.observe(a),e.then((()=>(r.disconnect(),r=null,s())))),function(e){return o?Promise.resolve(e):r?(n||(n=new Promise(((e,t)=>(i=e,s=t)))),n.then((()=>e))):Promise.reject()}}function We(e){e._invalidate(),e._invalidate=we,e._pending();const t=e._value,n=++e._version;let r=null;(e._promise=(e._inputs.length?Promise.all(e._inputs.map(Be)).then((function(a){if(e._version!==n)throw Ne;for(let t=0,n=a.length;t<n;++t)switch(a[t]){case $e:a[t]=r=ze(e);break;case Ie:r||(r=ze(e)),a[t]=Ve(r,e);break;case Se:a[t]=e}return e._definition.apply(t,a)})):new Promise((n=>n(e._definition.call(t))))).then((function(t){if(e._version!==n)throw Ne;if(function(e){return e&&"function"==typeof e.next&&"function"==typeof e.return}(t))return(r||ze(e)).then((a=t,function(){a.return()})),function(e,t,n){const r=e._module._runtime;let a;function o(e){return new Promise((e=>e(n.next(a)))).then((({done:t,value:n})=>t?void 0:Promise.resolve(n).then(e)))}function i(){const n=o((o=>{if(e._version!==t)throw Ne;return a=o,s(o,n).then((()=>r._precompute(i))),e._fulfilled(o),o}));n.catch((r=>{r!==Ne&&e._version===t&&(s(void 0,n),e._rejected(r))}))}function s(t,n){return e._value=t,e._promise=n,e._outputs.forEach(r._updates.add,r._updates),r._compute()}return o((n=>{if(e._version!==t)throw Ne;return a=n,r._precompute(i),n}))}(e,n,t);var a;return t}))).then((t=>{e._value=t,e._fulfilled(t)}),(t=>{t!==Ne&&e._version===n&&(e._value=void 0,e._rejected(t))}))}function He(e,t){e._invalidate(),e._invalidate=we,e._pending(),++e._version,e._indegree=NaN,(e._promise=Promise.reject(t)).catch(we),e._value=void 0,e._rejected(t)}function Ge(e){return globalThis[e]}Object.defineProperties(Oe.prototype,{_precompute:{value:function(e){this._precomputes.push(e),this._compute()},writable:!0,configurable:!0},_compute:{value:function(){return this._computing||(this._computing=this._computeSoon())},writable:!0,configurable:!0},_computeSoon:{value:function(){return new Promise(Le).then((()=>this._disposed?void 0:this._computeNow()))},writable:!0,configurable:!0},_computeNow:{value:async function(){let e,t,n=[],r=this._precomputes;if(r.length){this._precomputes=[];for(const e of r)e();await function(e=0){let t=Promise.resolve();for(let n=0;n<e;++n)t=t.then((()=>{}));return t}(3)}e=new Set(this._dirty),e.forEach((function(t){t._inputs.forEach(e.add,e);const n=function(e){if(e._observer!==xe)return!0;const t=new Set(e._outputs);for(const n of t){if(n._observer!==xe)return!0;n._outputs.forEach(t.add,t)}return!1}(t);n>t._reachable?this._updates.add(t):n<t._reachable&&t._invalidate(),t._reachable=n}),this),e=new Set(this._updates),e.forEach((function(t){t._reachable?(t._indegree=0,t._outputs.forEach(e.add,e)):(t._indegree=NaN,e.delete(t))})),this._computing=null,this._updates.clear(),this._dirty.clear(),e.forEach((function(e){e._outputs.forEach(Fe)}));do{for(e.forEach((function(e){0===e._indegree&&n.push(e)}));t=n.pop();)We(t),t._outputs.forEach(a),e.delete(t);e.forEach((function(t){De(t)&&(He(t,new me("circular definition")),t._outputs.forEach(Ue),e.delete(t))}))}while(e.size);function a(e){0==--e._indegree&&n.push(e)}},writable:!0,configurable:!0},dispose:{value:function(){this._computing=Promise.resolve(),this._disposed=!0,this._variables.forEach((e=>{e._invalidate(),e._version=NaN}))},writable:!0,configurable:!0},module:{value:function(e,t=we){let n;if(void 0===e)return(n=this._init)?(this._init=null,n):new Re(this);if(n=this._modules.get(e),n)return n;this._init=n=new Re(this),this._modules.set(e,n);try{e(this,t)}finally{this._init=null}return n},writable:!0,configurable:!0},fileAttachments:{value:pe.FileAttachments,writable:!0,configurable:!0}})},9391:(e,t,n)=>{function r(e){return e&&"function"==typeof e.toArrowBuffer}n.r(t),n.d(t,{isArqueroTable:()=>r})},7938:(e,t,n)=>{n.r(t),n.d(t,{getArrowTableSchema:()=>i,isArrowTable:()=>o,loadArrow:()=>c});var r=n(7363),a=n(9204);function o(e){return e&&"function"==typeof e.getChild&&"function"==typeof e.toArray&&e.schema&&Array.isArray(e.schema.fields)}function i(e){return e.schema.fields.map(s)}function s(e){return{name:e.name,type:l(e.type),nullable:e.nullable,databaseType:String(e.type)}}function l(e){switch(e.typeId){case 2:return"integer";case 3:case 7:return"number";case 4:case 15:return"buffer";case 5:return"string";case 6:return"boolean";case 8:case 9:case 10:return"date";case 12:case 16:return"array";case 13:case 14:return"object";default:return"other"}}async function c(){return await n(1187)(`${a.cdn}${r.arrow11.resolve()}`)}},7363:(e,t,n)=>{n.r(t),n.d(t,{arquero:()=>g,arrow11:()=>y,arrow4:()=>_,arrow9:()=>w,d3:()=>a,duckdb:()=>C,exceljs:()=>E,graphviz:()=>s,highlight:()=>l,htl:()=>f,inputs:()=>o,jszip:()=>d,katex:()=>c,leaflet:()=>A,lodash:()=>u,marked:()=>p,mermaid:()=>j,plot:()=>i,sql:()=>m,topojson:()=>x,vega:()=>h,vegalite:()=>b,vegaliteApi:()=>v});var r=n(170);const a=(0,r.dependency)("d3","7.8.5","dist/d3.min.js"),o=(0,r.dependency)("@observablehq/inputs","0.10.6","dist/inputs.min.js"),i=(0,r.dependency)("@observablehq/plot","0.6.13","dist/plot.umd.min.js"),s=(0,r.dependency)("@observablehq/graphviz","0.2.1","dist/graphviz.min.js"),l=(0,r.dependency)("@observablehq/highlight.js","2.0.0","highlight.min.js"),c=(0,r.dependency)("@observablehq/katex","0.11.1","dist/katex.min.js"),u=(0,r.dependency)("lodash","4.17.21","lodash.min.js"),f=(0,r.dependency)("htl","0.3.1","dist/htl.min.js"),d=(0,r.dependency)("jszip","3.10.1","dist/jszip.min.js"),p=(0,r.dependency)("marked","0.3.12","marked.min.js"),m=(0,r.dependency)("sql.js","1.8.0","dist/sql-wasm.js"),h=(0,r.dependency)("vega","5.22.1","build/vega.min.js"),b=(0,r.dependency)("vega-lite","5.6.0","build/vega-lite.min.js"),v=(0,r.dependency)("vega-lite-api","5.0.0","build/vega-lite-api.min.js"),_=(0,r.dependency)("apache-arrow","4.0.1","Arrow.es2015.min.js"),w=(0,r.dependency)("apache-arrow","9.0.0","+esm"),y=(0,r.dependency)("apache-arrow","11.0.0","+esm"),g=(0,r.dependency)("arquero","4.8.8","dist/arquero.min.js"),x=(0,r.dependency)("topojson-client","3.1.0","dist/topojson-client.min.js"),E=(0,r.dependency)("exceljs","4.3.0","dist/exceljs.min.js"),j=(0,r.dependency)("mermaid","9.2.2","dist/mermaid.min.js"),A=(0,r.dependency)("leaflet","1.9.3","dist/leaflet.js"),C=(0,r.dependency)("@duckdb/duckdb-wasm","1.24.0","+esm")},170:(e,t,n)=>{function r(e,t,n){return{resolve:(r=n)=>`${e}@${t}/${r}`}}n.r(t),n.d(t,{dependency:()=>r})},6342:(e,t,n)=>{function r(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n}n.r(t),n.d(t,{canvas:()=>r})},9733:(e,t,n)=>{function r(e,t,n){null==n&&(n=devicePixelRatio);var r=document.createElement("canvas");r.width=e*n,r.height=t*n,r.style.width=e+"px";var a=r.getContext("2d");return a.scale(n,n),a}n.r(t),n.d(t,{context2d:()=>r})},2938:(e,t,n)=>{function r(e,t="untitled",n="Save"){const r=document.createElement("a"),a=r.appendChild(document.createElement("button"));async function o(){await new Promise(requestAnimationFrame),URL.revokeObjectURL(r.href),r.removeAttribute("href"),a.textContent=n,a.disabled=!1}return a.textContent=n,r.download=t,r.onclick=async t=>{if(a.disabled=!0,r.href)return o();a.textContent="Saving\u2026";try{const t=await("function"==typeof e?e():e);a.textContent="Download",r.href=URL.createObjectURL(t)}catch(i){a.textContent=n}if(t.eventPhase)return o();a.disabled=!1},r}n.r(t),n.d(t,{download:()=>r})},3380:(e,t,n)=>{n.r(t),n.d(t,{element:()=>a});var r={math:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function a(e,t){var n,a=e+="",o=a.indexOf(":");o>=0&&"xmlns"!==(a=e.slice(0,o))&&(e=e.slice(o+1));var i=r.hasOwnProperty(a)?document.createElementNS(r[a],e):document.createElement(e);if(t)for(var s in t)o=(a=s).indexOf(":"),n=t[s],o>=0&&"xmlns"!==(a=s.slice(0,o))&&(s=s.slice(o+1)),r.hasOwnProperty(a)?i.setAttributeNS(r[a],s,n):i.setAttribute(s,n);return i}},1820:(e,t,n)=>{n.r(t),n.d(t,{canvas:()=>r.canvas,context2d:()=>a.context2d,download:()=>o.download,element:()=>i.element,input:()=>s.input,range:()=>l.range,select:()=>c.select,svg:()=>u.svg,text:()=>f.text,uid:()=>d.uid});var r=n(6342),a=n(9733),o=n(2938),i=n(3380),s=n(7585),l=n(7170),c=n(1106),u=n(5895),f=n(281),d=n(1831)},7585:(e,t,n)=>{function r(e){var t=document.createElement("input");return null!=e&&(t.type=e),t}n.r(t),n.d(t,{input:()=>r})},7170:(e,t,n)=>{function r(e,t,n){1===arguments.length&&(t=e,e=null);var r=document.createElement("input");return r.min=e=null==e?0:+e,r.max=t=null==t?1:+t,r.step=null==n?"any":n=+n,r.type="range",r}n.r(t),n.d(t,{range:()=>r})},1106:(e,t,n)=>{function r(e){var t=document.createElement("select");return Array.prototype.forEach.call(e,(function(e){var n=document.createElement("option");n.value=n.textContent=e,t.appendChild(n)})),t}n.r(t),n.d(t,{select:()=>r})},5895:(e,t,n)=>{function r(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("viewBox",[0,0,e,t]),n.setAttribute("width",e),n.setAttribute("height",t),n}n.r(t),n.d(t,{svg:()=>r})},281:(e,t,n)=>{function r(e){return document.createTextNode(e)}n.r(t),n.d(t,{text:()=>r})},1831:(e,t,n)=>{n.r(t),n.d(t,{uid:()=>a});var r=0;function a(e){return new o("O-"+(null==e?"":e+"-")+ ++r)}function o(e){this.id=e,this.href=new URL(`#${e}`,location)+""}o.prototype.toString=function(){return"url("+this.href+")"}},3874:(e,t,n)=>{n.r(t),n.d(t,{DuckDBClient:()=>c});var r=n(9391),a=n(7938),o=n(7363),i=n(3277),s=n(9204);let l;class c{constructor(e){Object.defineProperties(this,{_db:{value:e}})}async queryStream(e,t){const n=await this._db.connect();let r,o;try{if(t?.length>0){const a=await n.prepare(e);r=await a.send(...t)}else r=await n.send(e);if(o=await r.next(),o.done)throw new Error("missing first batch")}catch(i){throw await n.close(),i}return{schema:(0,a.getArrowTableSchema)(o.value),async*readRows(){try{for(;!o.done;)yield o.value.toArray(),o=await r.next()}finally{await n.close()}}}}async query(e,t){const n=await this.queryStream(e,t),r=[];for await(const a of n.readRows())for(const e of a)r.push(e);return r.schema=n.schema,r}async queryRow(e,t){const n=(await this.queryStream(e,t)).readRows();try{const{done:e,value:t}=await n.next();return e||!t.length?null:t[0]}finally{await n.return()}}async sql(e,...t){return await this.query(e.join("?"),t)}queryTag(e,...t){return[e.join("?"),t]}escape(e){return`"${e}"`}async describeTables(){return(await this.query("SHOW TABLES")).map((({name:e})=>({name:e})))}async describeColumns({table:e}={}){return(await this.query(`DESCRIBE ${this.escape(e)}`)).map((({column_name:e,column_type:t,null:n})=>({name:e,type:p(t),nullable:"NO"!==n,databaseType:t})))}static async of(e={},t={}){const p=await async function(){void 0===l&&(l=async function(){const e=await n(1187)(`${s.cdn}${o.duckdb.resolve()}`),t=await e.selectBundle({mvp:{mainModule:`${s.cdn}${o.duckdb.resolve("dist/duckdb-mvp.wasm")}`,mainWorker:`${s.cdn}${o.duckdb.resolve("dist/duckdb-browser-mvp.worker.js")}`},eh:{mainModule:`${s.cdn}${o.duckdb.resolve("dist/duckdb-eh.wasm")}`,mainWorker:`${s.cdn}${o.duckdb.resolve("dist/duckdb-browser-eh.worker.js")}`}}),r=new e.ConsoleLogger;return{module:e,bundle:t,logger:r}}());const{module:e,bundle:t,logger:r}=await l,a=await e.createWorker(t.mainWorker),i=new e.AsyncDuckDB(r,a);return await i.instantiate(t.mainModule),i}();return void 0===t.query?.castTimestampToDate&&(t={...t,query:{...t.query,castTimestampToDate:!0}}),void 0===t.query?.castBigIntToDouble&&(t={...t,query:{...t.query,castBigIntToDouble:!0}}),await p.open(t),await Promise.all(Object.entries(e).map((async([e,t])=>{if(t instanceof i.FileAttachment)await u(p,e,t);else if((0,a.isArrowTable)(t))await f(p,e,t);else if(Array.isArray(t))await d(p,e,t);else if((0,r.isArqueroTable)(t))await async function(e,t,n){const r=(await(0,a.loadArrow)()).tableFromIPC(n.toArrowBuffer());return await f(e,t,r)}(p,e,t);else if("data"in t){const{data:n,...r}=t;(0,a.isArrowTable)(n)?await f(p,e,n,r):await d(p,e,n,r)}else{if(!("file"in t))throw new Error(`invalid source: ${t}`);{const{file:n,...r}=t;await u(p,e,n,r)}}}))),new c(p)}}async function u(e,t,n,r){const a=await n.url();if(a.startsWith("blob:")){const t=await n.arrayBuffer();await e.registerFileBuffer(n.name,new Uint8Array(t))}else await e.registerFileURL(n.name,new URL(a,location).href,4);const o=await e.connect();try{switch(n.mimeType){case"text/csv":case"text/tab-separated-values":return await o.insertCSVFromPath(n.name,{name:t,schema:"main",...r}).catch((async e=>{if(e.toString().includes("Could not convert"))return await async function(e,t,n){const r=await e.prepare(`CREATE TABLE '${n}' AS SELECT * FROM read_csv_auto(?, ALL_VARCHAR=TRUE)`);return await r.send(t.name)}(o,n,t);throw e}));case"application/json":return await o.insertJSONFromPath(n.name,{name:t,schema:"main",...r});default:if(/\.arrow$/i.test(n.name)){const e=new Uint8Array(await n.arrayBuffer());return await o.insertArrowFromIPCStream(e,{name:t,schema:"main",...r})}if(/\.parquet$/i.test(n.name))return await o.query(`CREATE VIEW '${t}' AS SELECT * FROM parquet_scan('${n.name}')`);throw new Error(`unknown file type: ${n.mimeType}`)}}finally{await o.close()}}async function f(e,t,n,r){const a=await e.connect();try{await a.insertArrowTable(n,{name:t,schema:"main",...r})}finally{await a.close()}}async function d(e,t,n,r){const o=(await(0,a.loadArrow)()).tableFromJSON(n);return await f(e,t,o,r)}function p(e){switch(e){case"BIGINT":case"HUGEINT":case"UBIGINT":return"bigint";case"DOUBLE":case"REAL":case"FLOAT":return"number";case"INTEGER":case"SMALLINT":case"TINYINT":case"USMALLINT":case"UINTEGER":case"UTINYINT":return"integer";case"BOOLEAN":return"boolean";case"DATE":case"TIMESTAMP":case"TIMESTAMP WITH TIME ZONE":return"date";case"VARCHAR":case"UUID":return"string";default:return/^DECIMAL\(/.test(e)?"integer":"other"}}Object.defineProperty(c.prototype,"dialect",{value:"duckdb"})},3277:(e,t,n)=>{n.r(t),n.d(t,{AbstractFile:()=>C,FileAttachment:()=>T,FileAttachments:()=>q,NoFileAttachments:()=>N,ZipArchive:()=>k,enforceSchema:()=>j});var r={},a={};function o(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function i(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function s(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function l(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),a=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+s(-t,6):t>9999?"+"+s(t,6):s(t,4))+"-"+s(e.getUTCMonth()+1,2)+"-"+s(e.getUTCDate(),2)+(o?"T"+s(n,2)+":"+s(r,2)+":"+s(a,2)+"."+s(o,3)+"Z":a?"T"+s(n,2)+":"+s(r,2)+":"+s(a,2)+"Z":r||n?"T"+s(n,2)+":"+s(r,2)+"Z":"")}function c(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function s(e,t){var o,i=[],s=e.length,l=0,c=0,u=s<=0,f=!1;function d(){if(u)return a;if(f)return f=!1,r;var t,o,i=l;if(34===e.charCodeAt(i)){for(;l++<s&&34!==e.charCodeAt(l)||34===e.charCodeAt(++l););return(t=l)>=s?u=!0:10===(o=e.charCodeAt(l++))?f=!0:13===o&&(f=!0,10===e.charCodeAt(l)&&++l),e.slice(i+1,t-1).replace(/""/g,'"')}for(;l<s;){if(10===(o=e.charCodeAt(t=l++)))f=!0;else if(13===o)f=!0,10===e.charCodeAt(l)&&++l;else if(o!==n)continue;return e.slice(i,t)}return u=!0,e.slice(i,s)}for(10===e.charCodeAt(s-1)&&--s,13===e.charCodeAt(s-1)&&--s;(o=d())!==a;){for(var p=[];o!==r&&o!==a;)p.push(o),o=d();t&&null==(p=t(p,c++))||i.push(p)}return i}function c(t,n){return t.map((function(t){return n.map((function(e){return f(t[e])})).join(e)}))}function u(t){return t.map(f).join(e)}function f(e){return null==e?"":e instanceof Date?l(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,r,a=s(e,(function(e,a){if(n)return n(e,a-1);r=e,n=t?function(e,t){var n=o(e);return function(r,a){return t(n(r),a,e)}}(e,t):o(e)}));return a.columns=r||[],a},parseRows:s,format:function(t,n){return null==n&&(n=i(t)),[n.map(f).join(e)].concat(c(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=i(e)),c(e,t).join("\n")},formatRows:function(e){return e.map(u).join("\n")},formatRow:u,formatValue:f}}var u=c("\t"),f=u.parse,d=u.parseRows,p=(u.format,u.formatBody,u.formatRows,u.formatRow,u.formatValue,c(",")),m=p.parse,h=p.parseRows;p.format,p.formatBody,p.formatRows,p.formatRow,p.formatValue;function b(e){for(var t in e){var n,r,a=e[t].trim();if(a)if("true"===a)a=!0;else if("false"===a)a=!1;else if("NaN"===a)a=NaN;else if(isNaN(n=+a)){if(!(r=a.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;v&&r[4]&&!r[7]&&(a=a.replace(/-/g,"/").replace(/T/," ")),a=new Date(a)}else a=n;else a=null;e[t]=a}return e}const v=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();var _=n(7363),w=n(9204),y=n(4054),g=n(4199),x=n(538);async function E(e){const t=await fetch(await e.url());if(!t.ok)throw new Error(`Unable to load file: ${e.name}`);return t}function j(e,t){const n=new Map(t.map((({name:e,type:t})=>[e,t])));return Object.assign(e.map((e=>(0,g.coerceRow)(e,n,t))),{schema:t})}async function A(e,t,{array:n=!1,typed:r=!1}={}){const a=await e.text(),o="\t"===t?n?d:f:n?h:m;if("auto"===r&&!n){const e=o(a);return j(e,(0,g.inferSchema)(e,e.columns))}return o(a,r&&b)}class C{constructor(e,t){Object.defineProperty(this,"name",{value:e,enumerable:!0}),void 0!==t&&Object.defineProperty(this,"mimeType",{value:t+"",enumerable:!0})}async blob(){return(await E(this)).blob()}async arrayBuffer(){return(await E(this)).arrayBuffer()}async text(){return(await E(this)).text()}async json(){return(await E(this)).json()}async stream(){return(await E(this)).body}async csv(e){return A(this,",",e)}async tsv(e){return A(this,"\t",e)}async image(e){const t=await this.url();return new Promise(((n,r)=>{const a=new Image;new URL(t,document.baseURI).origin!==new URL(location).origin&&(a.crossOrigin="anonymous"),Object.assign(a,e),a.onload=()=>n(a),a.onerror=()=>r(new Error(`Unable to load file: ${this.name}`)),a.src=t}))}async arrow({version:e=4}={}){switch(e){case 4:{const[e,t]=await Promise.all([(0,w.requireDefault)(_.arrow4.resolve()),E(this)]);return e.Table.from(t)}case 9:{const[e,t]=await Promise.all([n(1187)(`${w.cdn}${_.arrow9.resolve()}`),E(this)]);return e.tableFromIPC(t)}case 11:{const[e,t]=await Promise.all([n(1187)(`${w.cdn}${_.arrow11.resolve()}`),E(this)]);return e.tableFromIPC(t)}default:throw new Error(`unsupported arrow version: ${e}`)}}async sqlite(){return y.SQLiteDatabaseClient.open(E(this))}async zip(){const[e,t]=await Promise.all([(0,w.requireDefault)(_.jszip.resolve()),this.arrayBuffer()]);return new k(await e.loadAsync(t))}async xml(e="application/xml"){return(new DOMParser).parseFromString(await this.text(),e)}async html(){return this.xml("text/html")}async xlsx(){const[e,t]=await Promise.all([(0,w.requireDefault)(_.exceljs.resolve()),this.arrayBuffer()]);return new x.Workbook(await(new e.Workbook).xlsx.load(t))}}class T extends C{constructor(e,t,n){super(t,n),Object.defineProperty(this,"_url",{value:e})}async url(){return await this._url+""}}function N(e){throw new Error(`File not found: ${e}`)}function q(e){return Object.assign((t=>{const n=e(t+="");if(null==n)throw new Error(`File not found: ${t}`);if("object"==typeof n&&"url"in n){const{url:e,mimeType:r}=n;return new T(e,t,r)}return new T(n,t)}),{prototype:T.prototype})}class k{constructor(e){Object.defineProperty(this,"_",{value:e}),this.filenames=Object.keys(e.files).filter((t=>!e.files[t].dir))}file(e){const t=this._.file(e+="");if(!t||t.dir)throw new Error(`file not found: ${e}`);return new S(t)}}class S extends C{constructor(e){super(e.name),Object.defineProperty(this,"_",{value:e}),Object.defineProperty(this,"_url",{writable:!0})}async url(){return this._url||(this._url=this.blob().then(URL.createObjectURL))}async blob(){return this._.async("blob")}async arrayBuffer(){return this._.async("arraybuffer")}async text(){return this._.async("text")}async json(){return JSON.parse(await this.text())}}},3825:(e,t,n)=>{function r(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=n,r.readAsArrayBuffer(e)}))}n.r(t),n.d(t,{buffer:()=>r})},6155:(e,t,n)=>{n.r(t),n.d(t,{buffer:()=>r.buffer,text:()=>a.text,url:()=>o.url});var r=n(3825),a=n(9974),o=n(2174)},9974:(e,t,n)=>{function r(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=n,r.readAsText(e)}))}n.r(t),n.d(t,{text:()=>r})},2174:(e,t,n)=>{function r(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=n,r.readAsDataURL(e)}))}n.r(t),n.d(t,{url:()=>r})},2238:(e,t,n)=>{n.r(t),n.d(t,{disposable:()=>a});var r=n(5243);function a(e,t){let n=!1;if("function"!=typeof t)throw new Error("dispose is not a function");return{[Symbol.iterator]:r.that,next:()=>n?{done:!0}:(n=!0,{done:!1,value:e}),return:()=>(n=!0,t(e),{done:!0}),throw:()=>({done:n=!0})}}},7254:(e,t,n)=>{function*r(e,t){for(var n,r=-1;!(n=e.next()).done;)t(n.value,++r)&&(yield n.value)}n.r(t),n.d(t,{filter:()=>r})},6785:(e,t,n)=>{n.r(t),n.d(t,{disposable:()=>r.disposable,filter:()=>a.filter,input:()=>o.input,map:()=>i.map,observe:()=>s.observe,queue:()=>l.queue,range:()=>c.range,valueAt:()=>u.valueAt,worker:()=>f.worker});var r=n(2238),a=n(7254),o=n(8044),i=n(3921),s=n(1367),l=n(9042),c=n(2707),u=n(5890),f=n(8179)},8044:(e,t,n)=>{n.r(t),n.d(t,{input:()=>a});var r=n(1367);function a(e){return(0,r.observe)((function(t){var n=function(e){switch(e.type){case"button":case"submit":case"checkbox":return"click";case"file":return"change";default:return"input"}}(e),r=o(e);function a(){t(o(e))}return e.addEventListener(n,a),void 0!==r&&t(r),function(){e.removeEventListener(n,a)}}))}function o(e){switch(e.type){case"range":case"number":return e.valueAsNumber;case"date":return e.valueAsDate;case"checkbox":return e.checked;case"file":return e.multiple?e.files:e.files[0];case"select-multiple":return Array.from(e.selectedOptions,(e=>e.value));default:return e.value}}},3921:(e,t,n)=>{function*r(e,t){for(var n,r=-1;!(n=e.next()).done;)yield t(n.value,++r)}n.r(t),n.d(t,{map:()=>r})},1367:(e,t,n)=>{n.r(t),n.d(t,{observe:()=>a});var r=n(5243);function a(e){let t,n,a=!1;const o=e((function(e){n?(n(e),n=null):a=!0;return t=e}));if(null!=o&&"function"!=typeof o)throw new Error("function"==typeof o.then?"async initializers are not supported":"initializer returned something, but not a dispose function");return{[Symbol.iterator]:r.that,throw:()=>({done:!0}),return:()=>(null!=o&&o(),{done:!0}),next:function(){return{done:!1,value:a?(a=!1,Promise.resolve(t)):new Promise((e=>n=e))}}}}},9042:(e,t,n)=>{n.r(t),n.d(t,{queue:()=>a});var r=n(5243);function a(e){let t;const n=[],a=e((function(e){n.push(e),t&&(t(n.shift()),t=null);return e}));if(null!=a&&"function"!=typeof a)throw new Error("function"==typeof a.then?"async initializers are not supported":"initializer returned something, but not a dispose function");return{[Symbol.iterator]:r.that,throw:()=>({done:!0}),return:()=>(null!=a&&a(),{done:!0}),next:function(){return{done:!1,value:n.length?Promise.resolve(n.shift()):new Promise((e=>t=e))}}}}},2707:(e,t,n)=>{function*r(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n));++r<a;)yield e+r*n}n.r(t),n.d(t,{range:()=>r})},5890:(e,t,n)=>{function r(e,t){if(!(!isFinite(t=+t)||t<0||t!=t|0))for(var n,r=-1;!(n=e.next()).done;)if(++r===t)return n.value}n.r(t),n.d(t,{valueAt:()=>r})},8179:(e,t,n)=>{n.r(t),n.d(t,{worker:()=>a});var r=n(2238);function a(e){const t=URL.createObjectURL(new Blob([e],{type:"text/javascript"})),n=new Worker(t);return(0,r.disposable)(n,(()=>{n.terminate(),URL.revokeObjectURL(t)}))}},6566:(e,t,n)=>{n.r(t),n.d(t,{html:()=>r});const r=(0,n(9225).template)((function(e){var t=document.createElement("template");return t.innerHTML=e.trim(),document.importNode(t.content,!0)}),(function(){return document.createElement("span")}))},7138:(e,t,n)=>{n.r(t),n.d(t,{AbstractFile:()=>r.AbstractFile,FileAttachments:()=>r.FileAttachments,Library:()=>a.Library,applyDataTableOperations:()=>s.__table,arrayIsPrimitive:()=>s.arrayIsPrimitive,getArrowTableSchema:()=>o.getArrowTableSchema,getSchema:()=>s.getSchema,getTypeValidator:()=>s.getTypeValidator,inferSchema:()=>s.inferSchema,isArqueroTable:()=>i.isArqueroTable,isArrowTable:()=>o.isArrowTable,isDataArray:()=>s.isDataArray,isDatabaseClient:()=>s.isDatabaseClient,loadDataSource:()=>s.loadDataSource,makeQueryTemplate:()=>s.makeQueryTemplate,observe:()=>l.observe});var r=n(3277),a=n(4739),o=n(7938),i=n(9391),s=n(4199),l=n(1367)},3861:(e,t,n)=>{n.r(t),n.d(t,{leaflet:()=>a});var r=n(7363);async function a(e){const t=await e(r.leaflet.resolve());if(!t._style){const n=document.createElement("link");n.rel="stylesheet",n.href=await e.resolve(r.leaflet.resolve("dist/leaflet.css")),t._style=document.head.appendChild(n)}return t}},4739:(e,t,n)=>{n.r(t),n.d(t,{Library:()=>A});var r=n(8961),a=n(1820),o=n(6155),i=n(3277),s=n(6785),l=n(3874),c=n(6566),u=n(3861),f=n(1715),d=n(8843),p=n(221),m=n(3666),h=n(5898),b=n(5545),v=n(9204),_=n(4054),w=n(4745),y=n(667),g=n(423),x=n(282),E=n(7363),j=n(4199);const A=Object.assign(Object.defineProperties((function(e){const t=(0,v.requirer)(e);var n;Object.defineProperties(this,(n={FileAttachment:()=>i.NoFileAttachments,Mutable:()=>p.Mutable,now:m.now,width:x.width,dot:()=>t(E.graphviz.resolve()),htl:()=>t(E.htl.resolve()),html:()=>c.html,md:()=>(0,f.md)(t),svg:()=>w.svg,tex:()=>(0,y.tex)(t),_:()=>t(E.lodash.resolve()),aq:()=>t.alias({"apache-arrow":E.arrow4.resolve()})(E.arquero.resolve()),Arrow:()=>t(E.arrow4.resolve()),d3:()=>t(E.d3.resolve()),DuckDBClient:()=>l.DuckDBClient,Inputs:()=>t(E.inputs.resolve()).then((e=>({...e,file:e.fileOf(i.AbstractFile)}))),L:()=>(0,u.leaflet)(t),mermaid:()=>(0,d.mermaid)(t),Plot:()=>t(E.plot.resolve()),__query:()=>j.__query,require:()=>t,resolve:()=>b.resolve,SQLite:()=>(0,_.SQLite)(t),SQLiteDatabaseClient:()=>_.SQLiteDatabaseClient,topojson:()=>t(E.topojson.resolve()),vl:()=>(0,g.vl)(t),aapl:()=>new i.FileAttachment("https://static.observableusercontent.com/files/3ccff97fd2d93da734e76829b2b066eafdaac6a1fafdec0faf6ebc443271cfc109d29e80dd217468fcb2aff1e6bffdc73f356cc48feb657f35378e6abbbb63b9").csv({typed:!0}),alphabet:()=>new i.FileAttachment("https://static.observableusercontent.com/files/75d52e6c3130b1cae83cda89305e17b50f33e7420ef205587a135e8562bcfd22e483cf4fa2fb5df6dff66f9c5d19740be1cfaf47406286e2eb6574b49ffc685d").csv({typed:!0}),cars:()=>new i.FileAttachment("https://static.observableusercontent.com/files/048ec3dfd528110c0665dfa363dd28bc516ffb7247231f3ab25005036717f5c4c232a5efc7bb74bc03037155cb72b1abe85a33d86eb9f1a336196030443be4f6").csv({typed:!0}),citywages:()=>new i.FileAttachment("https://static.observableusercontent.com/files/39837ec5121fcc163131dbc2fe8c1a2e0b3423a5d1e96b5ce371e2ac2e20a290d78b71a4fb08b9fa6a0107776e17fb78af313b8ea70f4cc6648fad68ddf06f7a").csv({typed:!0}),diamonds:()=>new i.FileAttachment("https://static.observableusercontent.com/files/87942b1f5d061a21fa4bb8f2162db44e3ef0f7391301f867ab5ba718b225a63091af20675f0bfe7f922db097b217b377135203a7eab34651e21a8d09f4e37252").csv({typed:!0}),flare:()=>new i.FileAttachment("https://static.observableusercontent.com/files/a6b0d94a7f5828fd133765a934f4c9746d2010e2f342d335923991f31b14120de96b5cb4f160d509d8dc627f0107d7f5b5070d2516f01e4c862b5b4867533000").csv({typed:!0}),industries:()=>new i.FileAttachment("https://static.observableusercontent.com/files/76f13741128340cc88798c0a0b7fa5a2df8370f57554000774ab8ee9ae785ffa2903010cad670d4939af3e9c17e5e18e7e05ed2b38b848ac2fc1a0066aa0005f").csv({typed:!0}),miserables:()=>new i.FileAttachment("https://static.observableusercontent.com/files/31d904f6e21d42d4963ece9c8cc4fbd75efcbdc404bf511bc79906f0a1be68b5a01e935f65123670ed04e35ca8cae3c2b943f82bf8db49c5a67c85cbb58db052").json(),olympians:()=>new i.FileAttachment("https://static.observableusercontent.com/files/31ca24545a0603dce099d10ee89ee5ae72d29fa55e8fc7c9ffb5ded87ac83060d80f1d9e21f4ae8eb04c1e8940b7287d179fe8060d887fb1f055f430e210007c").csv({typed:!0}),penguins:()=>new i.FileAttachment("https://static.observableusercontent.com/files/715db1223e067f00500780077febc6cebbdd90c151d3d78317c802732252052ab0e367039872ab9c77d6ef99e5f55a0724b35ddc898a1c99cb14c31a379af80a").csv({typed:!0}),pizza:()=>new i.FileAttachment("https://static.observableusercontent.com/files/c653108ab176088cacbb338eaf2344c4f5781681702bd6afb55697a3f91b511c6686ff469f3e3a27c75400001a2334dbd39a4499fe46b50a8b3c278b7d2f7fb5").csv({typed:!0}),weather:()=>new i.FileAttachment("https://static.observableusercontent.com/files/693a46b22b33db0f042728700e0c73e836fa13d55446df89120682d55339c6db7cc9e574d3d73f24ecc9bc7eb9ac9a1e7e104a1ee52c00aab1e77eb102913c1f").csv({typed:!0}),DOM:a,Files:o,Generators:s,Promises:h},Object.fromEntries(Object.entries(n).map(C))))}),{resolve:{get:()=>v.requireDefault.resolve,enumerable:!0,configurable:!0},require:{get:()=>v.requireDefault,set:v.setDefaultRequire,enumerable:!0,configurable:!0}}),{resolveFrom:r.resolveFrom,requireFrom:r.requireFrom});function C([e,t]){return[e,{value:t,writable:!0,enumerable:!0}]}},1715:(e,t,n)=>{n.r(t),n.d(t,{md:()=>o});var r=n(7363),a=n(9225);function o(e){return e(r.marked.resolve()).then((function(t){return(0,a.template)((function(n){var a=document.createElement("div");a.innerHTML=t(n,{langPrefix:""}).trim();var o=a.querySelectorAll("pre code[class]");return o.length>0&&e(r.highlight.resolve()).then((function(t){o.forEach((function(n){function a(){t.highlightBlock(n),n.parentNode.classList.add("observablehq--md-pre")}t.getLanguage(n.className)?a():e(r.highlight.resolve("async-languages/index.js")).then((a=>{if(a.has(n.className))return e(r.highlight.resolve("async-languages/"+a.get(n.className))).then((e=>{t.registerLanguage(n.className,e)}))})).then(a,a)}))})),a}),(function(){return document.createElement("div")}))}))}},8843:(e,t,n)=>{n.r(t),n.d(t,{mermaid:()=>o});var r=n(7363),a=n(1831);async function o(e){const t=await e(r.mermaid.resolve());return t.initialize({securityLevel:"loose",theme:"neutral"}),function(){const e=document.createElement("div");return e.innerHTML=t.render((0,a.uid)().id,String.raw.apply(String,arguments)),e.removeChild(e.firstChild)}}},221:(e,t,n)=>{n.r(t),n.d(t,{Mutable:()=>a});var r=n(1367);function a(e){let t;Object.defineProperties(this,{generator:{value:(0,r.observe)((e=>{t=e}))},value:{get:()=>e,set:n=>t(e=n)}}),void 0!==e&&t(e)}},3666:(e,t,n)=>{function*r(){for(;;)yield Date.now()}n.r(t),n.d(t,{now:()=>r})},2984:(e,t,n)=>{function r(e,t){return new Promise((function(n){setTimeout((function(){n(t)}),e)}))}n.r(t),n.d(t,{delay:()=>r})},5898:(e,t,n)=>{n.r(t),n.d(t,{delay:()=>r.delay,tick:()=>a.tick,when:()=>o.when});var r=n(2984),a=n(2989),o=n(7782)},2989:(e,t,n)=>{n.r(t),n.d(t,{tick:()=>a});var r=n(7782);function a(e,t){return(0,r.when)(Math.ceil((Date.now()+1)/e)*e,t)}},7782:(e,t,n)=>{n.r(t),n.d(t,{when:()=>a});var r=new Map;function a(e,t){var n;return(n=r.get(e=+e))?n.then((()=>t)):(n=Date.now())>=e?Promise.resolve(t):function(e,t){var n=new Promise((function(n){r.delete(t);var a=t-e;if(!(a>0))throw new Error("invalid time");if(a>2147483647)throw new Error("too long to wait");setTimeout(n,a)}));return r.set(t,n),n}(n,e).then((()=>t))}},9204:(e,t,n)=>{n.r(t),n.d(t,{cdn:()=>a,requireDefault:()=>o,requirer:()=>s,setDefaultRequire:()=>i});var r=n(8961);const a="https://cdn.observableusercontent.com/npm/";let o=r.require;function i(e){o=e}function s(e){return null==e?o:(0,r.requireFrom)(e)}},5545:(e,t,n)=>{function r(e,t){if(/^(\w+:)|\/\//i.test(e))return e;if(/^[.]{0,2}\//i.test(e))return new URL(e,null==t?location:t).href;if(!e.length||/^[\s._]/.test(e)||/\s$/.test(e))throw new Error("illegal name");return"https://unpkg.com/"+e}n.r(t),n.d(t,{resolve:()=>r})},4054:(e,t,n)=>{n.r(t),n.d(t,{SQLite:()=>o,SQLiteDatabaseClient:()=>i});var r=n(7363),a=n(9204);async function o(e){const[t,n]=await Promise.all([e(r.sql.resolve()),e.resolve(r.sql.resolve("dist/"))]);return t({locateFile:e=>`${n}${e}`})}class i{constructor(e){Object.defineProperties(this,{_db:{value:e}})}static async open(e){const[t,n]=await Promise.all([o(a.requireDefault),Promise.resolve(e).then(l)]);return new i(new t.Database(n))}async query(e,t){return await async function(e,t,n){const[r]=await e.exec(t,n);if(!r)return[];const{columns:a,values:o}=r,i=o.map((e=>Object.fromEntries(e.map(((e,t)=>[a[t],e])))));return i.columns=a,i}(this._db,e,t)}async queryRow(e,t){return(await this.query(e,t))[0]||null}async explain(e,t){return c("pre",{className:"observablehq--inspect"},[u((await this.query(`EXPLAIN QUERY PLAN ${e}`,t)).map((e=>e.detail)).join("\n"))])}async describeTables({schema:e}={}){return this.query(`SELECT NULLIF(schema, 'main') AS schema, name FROM pragma_table_list() WHERE type = 'table'${null==e?"":" AND schema = ?"} AND name NOT LIKE 'sqlite_%' ORDER BY schema, name`,null==e?[]:[e])}async describeColumns({schema:e,table:t}={}){if(null==t)throw new Error("missing table");const n=await this.query(`SELECT name, type, "notnull" FROM pragma_table_info(?${null==e?"":", ?"}) ORDER BY cid`,null==e?[t]:[t,e]);if(!n.length)throw new Error(`table not found: ${t}`);return n.map((({name:e,type:t,notnull:n})=>({name:e,type:s(t),databaseType:t,nullable:!n})))}async describe(e){const t=await(void 0===e?this.query("SELECT name FROM sqlite_master WHERE type = 'table'"):this.query("SELECT * FROM pragma_table_info(?)",[e]));if(!t.length)throw new Error("Not found");const{columns:n}=t;return c("table",{value:t},[c("thead",[c("tr",n.map((e=>c("th",[u(e)]))))]),c("tbody",t.map((e=>c("tr",n.map((t=>c("td",[u(e[t])])))))))])}async sql(){return this.query(...this.queryTag.apply(this,arguments))}queryTag(e,...t){return[e.join("?"),t]}}function s(e){switch(e){case"NULL":return"null";case"INT":case"INTEGER":case"TINYINT":case"SMALLINT":case"MEDIUMINT":case"BIGINT":case"UNSIGNED BIG INT":case"INT2":case"INT8":return"integer";case"TEXT":case"CLOB":case"DATE":case"DATETIME":return"string";case"REAL":case"DOUBLE":case"DOUBLE PRECISION":case"FLOAT":case"NUMERIC":return"number";case"BLOB":return"buffer";default:return/^(?:(?:(?:VARYING|NATIVE) )?CHARACTER|(?:N|VAR|NVAR)CHAR)\(/.test(e)?"string":/^(?:DECIMAL|NUMERIC)\(/.test(e)?"number":"other"}}function l(e){return"string"==typeof e?fetch(e).then(l):e instanceof Response||e instanceof Blob?e.arrayBuffer().then(l):e instanceof ArrayBuffer?new Uint8Array(e):e}function c(e,t,n){2===arguments.length&&(n=t,t=void 0);const r=document.createElement(e);if(void 0!==t)for(const a in t)r[a]=t[a];if(void 0!==n)for(const a of n)r.appendChild(a);return r}function u(e){return document.createTextNode(e)}Object.defineProperty(i.prototype,"dialect",{value:"sqlite"})},4745:(e,t,n)=>{n.r(t),n.d(t,{svg:()=>r});const r=(0,n(9225).template)((function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.innerHTML=e.trim(),t}),(function(){return document.createElementNS("http://www.w3.org/2000/svg","g")}))},4199:(e,t,n)=>{function r(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function a(e,t=r){let n,a=!1;if(1===t.length){let o;for(const i of e){const e=t(i);(a?r(e,o)>0:0===r(e,e))&&(n=i,o=e,a=!0)}}else for(const r of e)(a?t(r,n)>0:0===t(r,r))&&(n=r,a=!0);return n}n.r(t),n.d(t,{__query:()=>w,__table:()=>K,arrayIsPrimitive:()=>h,coerceRow:()=>X,coerceToType:()=>Y,getSchema:()=>Q,getTypeValidator:()=>H,inferSchema:()=>te,isDataArray:()=>f,isDatabaseClient:()=>u,loadDataSource:()=>y,makeQueryTemplate:()=>T});var o=n(3277),i=n(9391),s=n(7938),l=n(3874);const c=20;function u(e,t){return e&&("function"==typeof e.sql||"function"==typeof e.queryTag&&("function"==typeof e.query||"function"==typeof e.queryStream))&&("table"!==t||"function"==typeof e.describeColumns)&&e!==w}function f(e){return Array.isArray(e)&&(d(e.schema)||p(e.columns)||function(e){const t=Math.min(c,e.length);for(let n=0;n<t;++n){const t=e[n];if(null===t||"object"!=typeof t)return!1}return t>0&&function(e){for(const t in e)return!0;return!1}(e[0])}(e)||b(e)||v(e))||_(e)}function d(e){return Array.isArray(e)&&e.every(m)}function p(e){return Array.isArray(e)&&e.every((e=>"string"==typeof e))}function m(e){return e&&"string"==typeof e.name&&"string"==typeof e.type}function h(e){return _(e)||b(e)||v(e)}function b(e){const t=Math.min(c,e.length);if(!(t>0))return!1;let n,r=!1;for(let a=0;a<t;++a){const t=e[a];if(null==t)continue;const o=typeof t;if(void 0===n)switch(o){case"number":case"boolean":case"string":case"bigint":n=o;break;default:return!1}else if(o!==n)return!1;r=!0}return r}function v(e){const t=Math.min(c,e.length);if(!(t>0))return!1;let n=!1;for(let r=0;r<t;++r){const t=e[r];if(null!=t){if(!(t instanceof Date))return!1;n=!0}}return n}function _(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}const w=Object.assign((async(e,t,n,r)=>{if(u(e=await E(await e,r)))return C(e,T(t,e),n);if(f(e))return K(e,t);if(!e)throw new Error("missing data source");throw new Error("invalid data source")}),{sql:(e,t,n)=>async function(){return C(await j(await e,n),arguments,t)}});async function y(e,t,n){switch(t){case"chart":return x(e);case"table":return E(e,n);case"sql":return j(e,n)}return e}function g(e){const t=new WeakMap;return(n,r)=>{if(!n||"object"!=typeof n)throw new Error("invalid data source");let a=t.get(n);return(!a||f(n)&&n.length!==a._numRows)&&(a=e(n,r),a._numRows=n.length,t.set(n,a)),a}}const x=g((async e=>{if(e instanceof o.FileAttachment){switch(e.mimeType){case"text/csv":return e.csv({typed:"auto"});case"text/tab-separated-values":return e.tsv({typed:"auto"});case"application/json":return e.json()}throw new Error(`unsupported file type: ${e.mimeType}`)}return e})),E=g((async(e,t)=>{if(e instanceof o.FileAttachment){switch(e.mimeType){case"text/csv":return e.csv();case"text/tab-separated-values":return e.tsv();case"application/json":return e.json();case"application/x-sqlite3":return e.sqlite()}if(/\.(arrow|parquet)$/i.test(e.name))return A(e,t);throw new Error(`unsupported file type: ${e.mimeType}`)}return(0,s.isArrowTable)(e)||(0,i.isArqueroTable)(e)?A(e,t):f(e)&&h(e)?Array.from(e,(e=>({value:e}))):e})),j=g((async(e,t)=>{if(e instanceof o.FileAttachment){switch(e.mimeType){case"text/csv":case"text/tab-separated-values":case"application/json":return A(e,t);case"application/x-sqlite3":return e.sqlite()}if(/\.(arrow|parquet)$/i.test(e.name))return A(e,t);throw new Error(`unsupported file type: ${e.mimeType}`)}return f(e)?A(await async function(e,t){const n=await(0,s.loadArrow)();return h(e)?n.tableFromArrays({[t]:e}):n.tableFromJSON(e)}(e,t),t):(0,s.isArrowTable)(e)||(0,i.isArqueroTable)(e)?A(e,t):e}));function A(e,t=(e instanceof o.FileAttachment?function(e){return e.name.replace(/@\d+(?=\.|$)/,"").replace(/\.\w+$/,"")}(e):"__table")){return l.DuckDBClient.of({[t]:e})}async function C(e,t,n){if(!e)throw new Error("missing data source");if("function"==typeof e.queryTag){const r=new AbortController,a={signal:r.signal};if(n.then((()=>r.abort("invalidated"))),"function"==typeof e.queryStream)return async function*(e){let t=performance.now();const n=await e,r=[];r.done=!1,r.error=null,r.schema=n.schema;try{for await(const e of n.readRows()){performance.now()-t>150&&r.length>0&&(yield r,t=performance.now());for(const t of e)r.push(t)}r.done=!0,yield r}catch(a){r.error=a,yield r}}(e.queryStream(...e.queryTag.apply(e,t),a));if("function"==typeof e.query)return e.query(...e.queryTag.apply(e,t),a)}if("function"==typeof e.sql)return e.sql.apply(e,t);throw new Error("source does not implement query, queryStream, or sql")}function T(e,t){const n="function"==typeof t.escape?t.escape:e=>e,{select:r,from:a,filter:o,sort:i,slice:s}=e;if(!a.table)throw new Error("missing from table");if(r.columns&&0===r.columns.length)throw new Error("at least one column must be selected");const l=new Map(e.names?.map((({column:e,name:t})=>[e,t]))),c=[[`SELECT ${r.columns?r.columns.map((e=>{const t=l.get(e);return t?`${n(e)} AS ${n(t)}`:n(e)})).join(", "):"*"} FROM ${N(a.table,n)}`]];for(let u=0;u<o.length;++u)q(u?"\nAND ":"\nWHERE ",c),S(o[u],c,n);for(let u=0;u<i.length;++u)q(u?", ":"\nORDER BY ",c),k(i[u],c,n);if("mssql"===t.dialect||"oracle"===t.dialect){if(null!==s.to||null!==s.from){if(!i.length){if(!r.columns)throw new Error("at least one column must be explicitly specified. Received '*'.");q("\nORDER BY ",c),k({column:r.columns[0],direction:"ASC"},c,n)}q(`\nOFFSET ${s.from||0} ROWS`,c),q(`\nFETCH NEXT ${null!==s.to?s.to-(s.from||0):1e9} ROWS ONLY`,c)}}else null===s.to&&null===s.from||q("\nLIMIT "+(null!==s.to?s.to-(s.from||0):1e9),c),null!==s.from&&q(` OFFSET ${s.from}`,c);return c}function N(e,t){if("object"==typeof e){let n="";return null!=e.database&&(n+=t(e.database)+"."),null!=e.schema&&(n+=t(e.schema)+"."),n+=t(e.table),n}return t(e)}function q(e,t){const n=t[0];n[n.length-1]+=e}function k({column:e,direction:t},n,r){q(`${r(e)} ${t.toUpperCase()}`,n)}function S({type:e,operands:t},n,r){if(t.length<1)throw new Error("Invalid operand length");if(1===t.length||"v"===e||"nv"===e)switch($(t[0],n,r),e){case"n":case"nv":return void q(" IS NULL",n);case"nn":case"v":return void q(" IS NOT NULL",n);default:throw new Error("Invalid filter operation")}if(2!==t.length||["in","nin"].includes(e)){var a;switch($(t[0],n,r),e){case"in":q(" IN (",n);break;case"nin":q(" NOT IN (",n);break;default:throw new Error("Invalid filter operation")}!function(e,t){let n=!0;for(const r of e)n?n=!1:q(",",t),t.push(r.value),t[0].push("")}(t.slice(1),n),q(")",n)}else{if(["c","nc"].includes(e)){switch($(t[0],n,r),e){case"c":q(" LIKE ",n);break;case"nc":q(" NOT LIKE ",n)}return void $((a=t[1],{...a,value:`%${a.value}%`}),n,r)}switch($(t[0],n,r),e){case"eq":q(" = ",n);break;case"ne":q(" <> ",n);break;case"gt":q(" > ",n);break;case"lt":q(" < ",n);break;case"gte":q(" >= ",n);break;case"lte":q(" <= ",n);break;default:throw new Error("Invalid filter operation")}$(t[1],n,r)}}function $(e,t,n){"column"===e.type?q(n(e.value),t):(t.push(e.value),t[0].push(""))}function I(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))}function R(e,t){return I(e,t)||(e<t?-1:e>t?1:0)}function M(e,t){return I(e,t)||(e>t?-1:e<t?1:0)}const P=e=>"number"==typeof e&&!Number.isNaN(e),L=e=>Number.isInteger(e)&&!Number.isNaN(e),O=e=>"string"==typeof e,D=e=>"boolean"==typeof e,F=e=>"bigint"==typeof e,U=e=>e instanceof Date&&!isNaN(e),B=e=>e instanceof ArrayBuffer,z=e=>Array.isArray(e),V=e=>"object"==typeof e&&null!==e,W=e=>null!=e;function H(e){switch(e){case"string":return O;case"bigint":return F;case"boolean":return D;case"number":return P;case"integer":return L;case"date":return U;case"buffer":return B;case"array":return z;case"object":return V;default:return W}}const G=/^(([-+]\d{2})?\d{4}(-\d{2}(-\d{2}))|(\d{1,2})\/(\d{1,2})\/(\d{2,4}))([T ]\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function Y(e,t){switch(t){case"string":return"string"==typeof e||null==e?e:String(e);case"boolean":if("string"==typeof e){const t=e.trim().toLowerCase();return"true"===t||"false"!==t&&null}return"boolean"==typeof e||null==e?e:Boolean(e);case"bigint":return"bigint"==typeof e||null==e?e:Number.isInteger("string"!=typeof e||e.trim()?+e:NaN)?BigInt(e):void 0;case"integer":case"number":return"number"==typeof e?e:null==e||"string"==typeof e&&!e.trim()?NaN:Number(e);case"date":{if(e instanceof Date||null==e)return e;if("number"==typeof e)return new Date(e);const t=String(e).trim();return"string"!=typeof e||t?new Date(G.test(t)?t:NaN):null}case"array":case"object":case"buffer":case"other":return e;default:throw new Error(`Unable to coerce to type: ${t}`)}}function Q(e){const{columns:t}=e;let{schema:n}=e;return d(n)?{schema:n,inferred:!1}:(n=te(e,p(t)?t:void 0),{schema:n,inferred:!0})}function Z(e,t){const n=e;let{schema:r,inferred:a}=Q(e);const o=new Map(r.map((({name:e,type:t})=>[e,t])));if(t.types){for(const{name:e,type:a}of t.types){o.set(e,a),r===n.schema&&(r=r.slice());const t=r.findIndex((t=>t.name===e));t>-1&&(r[t]={...r[t],type:a})}e=e.map((e=>X(e,o,r)))}else a&&(e=e.map((e=>X(e,o,r))));return{source:e,schema:r}}function J(e,t){if(!t.names)return e;const n=new Map(t.names.map((e=>[e.column,e])));return e.map((e=>Object.fromEntries(Object.keys(e).map((t=>{const r=n.get(t);return[r?.name??t,e[t]]})))))}function K(e,t){const n=new Map,r=e,a=Z(e,t);e=a.source;let o=a.schema;if(t.derive){const r=[];t.derive.map((({name:a,value:o})=>{let i=[];J(e,t).map(((e,t)=>{let n;try{n=o(e)}catch(s){i.push({index:t,error:s}),n=void 0}r[t]?r[t]={...r[t],[a]:n}:r.push({[a]:n})})),i.length&&n.set(a,i)}));const a=Z(r,t);e=e.map(((e,t)=>({...e,...a.source[t]}))),o=[...o,...a.schema]}for(const{type:c,operands:u}of t.filter){const[{value:t}]=u,n=u.slice(1).map((({value:e})=>e));switch(c){case"v":{const[r]=n,a=H(r);e=e.filter((e=>a(e[t])));break}case"nv":{const[r]=n,a=H(r);e=e.filter((e=>!a(e[t])));break}case"eq":{const[r]=n;if(r instanceof Date){const n=+r;e=e.filter((e=>+e[t]===n))}else e=e.filter((e=>e[t]===r));break}case"ne":{const[r]=n;e=e.filter((e=>e[t]!==r));break}case"c":{const[r]=n;e=e.filter((e=>"string"==typeof e[t]&&e[t].includes(r)));break}case"nc":{const[r]=n;e=e.filter((e=>"string"==typeof e[t]&&!e[t].includes(r)));break}case"in":{const r=new Set(n);e=e.filter((e=>r.has(e[t])));break}case"nin":{const r=new Set(n);e=e.filter((e=>!r.has(e[t])));break}case"n":e=e.filter((e=>null==e[t]));break;case"nn":e=e.filter((e=>null!=e[t]));break;case"lt":{const[r]=n;e=e.filter((e=>e[t]<r));break}case"lte":{const[r]=n;e=e.filter((e=>e[t]<=r));break}case"gt":{const[r]=n;e=e.filter((e=>e[t]>r));break}case"gte":{const[r]=n;e=e.filter((e=>e[t]>=r));break}default:throw new Error(`unknown filter type: ${c}`)}}for(const{column:c,direction:u}of function(e){if("function"!=typeof e[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(e).reverse()}(t.sort)){const t="desc"===u?M:R;e===r&&(e=e.slice()),e.sort(((e,n)=>t(e[c],n[c])))}let{from:i,to:s}=t.slice;i=null==i?0:Math.max(0,i),s=null==s?1/0:Math.max(0,s),(i>0||s<1/0)&&(e=e.slice(Math.max(0,i),Math.max(0,s)));let l=o.slice();if(t.select.columns){if(o){const e=new Map(o.map((e=>[e.name,e])));o=t.select.columns.map((t=>e.get(t)))}e=e.map((e=>Object.fromEntries(t.select.columns.map((t=>[t,e[t]])))))}if(t.names){const n=new Map(t.names.map((e=>[e.column,e])));o&&(o=o.map((e=>{const t=n.get(e.name);return{...e,...t?{name:t.name}:null}}))),l&&(l=l.map((e=>{const t=n.get(e.name);return{...e,...t?{name:t.name}:null}}))),e=J(e,t)}return e!==r&&o&&(e.schema=o),e.fullSchema=l,e.errors=n,e}function X(e,t,n){const r={};for(const a of n){const n=t.get(a.name),o=e[a.name];r[a.name]="raw"===n?o:Y(o,n)}return r}const ee=["boolean","integer","number","date","bigint","array","object","buffer"];function te(e,t=function(e){const t=new Set;for(const n of e)if(n)for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.add(e);return Array.from(t)}(e)){const n=[],r=e.slice(0,100),o={};for(const i of t){const e=o[i]={boolean:0,integer:0,number:0,date:0,string:0,array:0,object:0,bigint:0,buffer:0,defined:0};for(const n of r){let t=n[i];if(null==t)continue;const r=typeof t;if("string"!==r)++e.defined,Array.isArray(t)?++e.array:t instanceof Date?++e.date:t instanceof ArrayBuffer?++e.buffer:"number"===r?(++e.number,Number.isInteger(t)&&++e.integer):r in e&&++e[r];else{if(t=t.trim(),!t)continue;++e.defined,++e.string,/^(true|false)$/i.test(t)?++e.boolean:t&&!isNaN(t)?(++e.number,Number.isInteger(+t)&&++e.integer):G.test(t)&&++e.date}}const t=Math.max(1,.9*e.defined),s=a(ee,(n=>e[n]>=t?e[n]:NaN))??(e.string>=t?"string":"other");n.push({name:i,type:s,inferred:s})}return n}},9225:(e,t,n)=>{function r(e,t){return function(n){var r,a,o,i,s,l,c,u,f=n[0],d=[],p=null,m=-1;for(s=1,l=arguments.length;s<l;++s){if((r=arguments[s])instanceof Node)d[++m]=r,f+="\x3c!--o:"+m+"--\x3e";else if(Array.isArray(r)){for(c=0,u=r.length;c<u;++c)(a=r[c])instanceof Node?(null===p&&(d[++m]=p=document.createDocumentFragment(),f+="\x3c!--o:"+m+"--\x3e"),p.appendChild(a)):(p=null,f+=a);p=null}else f+=r;f+=n[s]}if(p=e(f),++m>0){for(o=new Array(m),i=document.createTreeWalker(p,NodeFilter.SHOW_COMMENT,null,!1);i.nextNode();)a=i.currentNode,/^o:/.test(a.nodeValue)&&(o[+a.nodeValue.slice(2)]=a);for(s=0;s<m;++s)(a=o[s])&&a.parentNode.replaceChild(d[s],a)}return 1===p.childNodes.length?p.removeChild(p.firstChild):11===p.nodeType?((a=t()).appendChild(p),a):p}}n.r(t),n.d(t,{template:()=>r})},667:(e,t,n)=>{n.r(t),n.d(t,{tex:()=>i});var r=n(7363),a=String.raw;function o(e){return new Promise((function(t,n){var r=document.createElement("link");r.rel="stylesheet",r.href=e,r.onerror=n,r.onload=t,document.head.appendChild(r)}))}function i(e){return Promise.all([e(r.katex.resolve()),e.resolve(r.katex.resolve("dist/katex.min.css")).then(o)]).then((function(e){var t=e[0],n=r();function r(e){return function(){var n=document.createElement("div");return t.render(a.apply(String,arguments),n,e),n.removeChild(n.firstChild)}}return n.options=r,n.block=r({displayMode:!0}),n}))}},5243:(e,t,n)=>{function r(){return this}n.r(t),n.d(t,{that:()=>r})},423:(e,t,n)=>{n.r(t),n.d(t,{vl:()=>a});var r=n(7363);async function a(e){const[t,n,a]=await Promise.all([r.vega,r.vegalite,r.vegaliteApi].map((t=>e(t.resolve()))));return a.register(t,n)}},282:(e,t,n)=>{n.r(t),n.d(t,{width:()=>a});var r=n(1367);function a(){return(0,r.observe)((function(e){var t=e(document.body.clientWidth);function n(){var n=document.body.clientWidth;n!==t&&e(t=n)}return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}))}},538:(e,t,n)=>{n.r(t),n.d(t,{Workbook:()=>r});class r{constructor(e){Object.defineProperties(this,{_:{value:e},sheetNames:{value:e.worksheets.map((e=>e.name)),enumerable:!0}})}sheet(e,t){const n="number"==typeof e?this.sheetNames[e]:this.sheetNames.includes(e+="")?e:null;if(null==n)throw new Error(`Sheet not found: ${e}`);return function(e,{range:t,headers:n}={}){let[[r,o],[l,c]]=function(e=":",{columnCount:t,rowCount:n}){if(!(e+="").match(/^[A-Z]*\d*:[A-Z]*\d*$/))throw new Error("Malformed range specifier");const[[r=0,a=0],[o=t-1,i=n-1]]=e.split(":").map(s);return[[r,a],[o,i]]}(t,e);const u=n?e._rows[o++]:null;let f=new Set(["#"]);for(let s=r;s<=l;s++){const e=u?a(u.findCell(s+1)):null;let t=e&&e+""||i(s);for(;f.has(t);)t+="_";f.add(t)}f=new Array(r).concat(Array.from(f));const d=new Array(c-o+1);for(let i=o;i<=c;i++){const t=d[i-o]=Object.create(null,{"#":{value:i+1}}),n=e.getRow(i+1);if(n.hasValues)for(let e=r;e<=l;e++){const r=a(n.findCell(e+1));null!=r&&(t[f[e+1]]=r)}}return d.columns=f.filter((()=>!0)),d}(this._.getWorksheet(n),t)}}function a(e){if(!e)return;const{value:t}=e;if(t&&"object"==typeof t&&!(t instanceof Date)){if(t.formula||t.sharedFormula)return t.result&&t.result.error?NaN:t.result;if(t.richText)return o(t);if(t.text){let{text:e}=t;return e.richText&&(e=o(e)),t.hyperlink&&t.hyperlink!==e?`${t.hyperlink} ${e}`:e}return t}return t}function o(e){return e.richText.map((e=>e.text)).join("")}function i(e){let t="";e++;do{t=String.fromCharCode(64+(e%26||26))+t}while(e=Math.floor((e-1)/26));return t}function s(e){const[,t,n]=e.match(/^([A-Z]*)(\d*)$/);let r=0;if(t)for(let a=0;a<t.length;a++)r+=Math.pow(26,t.length-a-1)*(t.charCodeAt(a)-64);return[r?r-1:void 0,n?+n-1:void 0]}},8961:(e,t,n)=>{n.r(t),n.d(t,{RequireError:()=>f,require:()=>m,requireFrom:()=>h,resolveFrom:()=>p});const r=new Map,a=[],o=a.map,i=a.some,s=a.hasOwnProperty,l=/^((?:@[^/@]+\/)?[^/@]+)(?:@([^/]+))?(?:\/(.*))?$/,c=/^\d+\.\d+\.\d+(-[\w-.+]+)?$/,u=/(?:\.[^/]*|\/)$/;class f extends Error{constructor(e){super(e)}}function d(e){const t=l.exec(e);return t&&{name:t[1],version:t[2],path:t[3]}}function p(e="https://cdn.jsdelivr.net/npm/",t=["unpkg","jsdelivr","browser","main"]){if(!/\/$/.test(e))throw new Error("origin lacks trailing slash");function n(t){const n=`${e}${t.name}${t.version?`@${t.version}`:""}/package.json`;let a=r.get(n);return a||r.set(n,a=fetch(n).then((e=>{if(!e.ok)throw new f("unable to load package.json");return e.redirected&&!r.has(e.url)&&r.set(e.url,a),e.json()}))),a}return async function(r,a){if(r.startsWith(e)&&(r=r.substring(e.length)),/^(\w+:)|\/\//i.test(r))return r;if(/^[.]{0,2}\//i.test(r))return new URL(r,null==a?location:a).href;if(!r.length||/^[\s._]/.test(r)||/\s$/.test(r))throw new f("illegal name");const o=d(r);if(!o)return`${e}${r}`;if(!o.version&&null!=a&&a.startsWith(e)){const t=await n(d(a.substring(e.length)));o.version=t.dependencies&&t.dependencies[o.name]||t.peerDependencies&&t.peerDependencies[o.name]}if(o.path&&!u.test(o.path)&&(o.path+=".js"),o.path&&o.version&&c.test(o.version))return`${e}${o.name}@${o.version}/${o.path}`;const i=await n(o);return`${e}${i.name}@${i.version}/${o.path||function(e){for(const n of t){let t=e[n];if("string"==typeof t)return t.startsWith("./")&&(t=t.slice(2)),u.test(t)?t:`${t}.js`}}(i)||"index.js"}`}}f.prototype.name=f.name;var m=h(p());function h(e){const t=new Map,n=i(null);function r(e){if("string"!=typeof e)return e;let n=t.get(e);return n||t.set(e,n=new Promise(((t,n)=>{const r=document.createElement("script");r.onload=()=>{try{t(a.pop()(i(e)))}catch(o){n(new f("invalid module"))}r.remove()},r.onerror=()=>{n(new f("unable to load module")),r.remove()},r.async=!0,r.src=e,window.define=w,document.head.appendChild(r)}))),n}function i(t){return n=>Promise.resolve(e(n,t)).then(r)}function s(e){return arguments.length>1?Promise.all(o.call(arguments,n)).then(b):n(e)}return s.alias=function(t){return h(((n,r)=>n in t&&(r=null,"string"!=typeof(n=t[n]))?n:e(n,r)))},s.resolve=e,s}function b(e){const t={};for(const n of e)for(const e in n)s.call(n,e)&&(null==n[e]?Object.defineProperty(t,e,{get:v(n,e)}):t[e]=n[e]);return t}function v(e,t){return()=>e[t]}function _(e){return"exports"===(e+="")||"module"===e}function w(e,t,n){const r=arguments.length;r<2?(n=e,t=[]):r<3&&(n=t,t="string"==typeof e?[]:e),a.push(i.call(t,_)?e=>{const r={},a={exports:r};return Promise.all(o.call(t,(t=>"exports"===(t+="")?r:"module"===t?a:e(t)))).then((e=>(n.apply(null,e),a.exports)))}:e=>Promise.all(o.call(t,e)).then((e=>"function"==typeof n?n.apply(null,e):n)))}w.amd={}}}]);